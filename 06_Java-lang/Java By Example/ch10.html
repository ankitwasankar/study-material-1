<HTML>

<HEAD>

<TITLE>Chapter 10 -- The while and do-while Loops</TITLE>



<META>

</HEAD>

<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000EE" VLINK="#551A8B" ALINK="#CE2910">

<H1><FONT SIZE=6 COLOR=#Ff0000>Chapter&nbsp;10</FONT></H1>

<H1><FONT SIZE=6 COLOR=#Ff0000>The <I>while</I> and <I>do-while</I>

Loops</FONT></H1>

<HR>

<P>

<CENTER><B><FONT SIZE=5><A NAME="CONTENTS">CONTENTS</A></FONT></B></CENTER>

<UL>

<LI><A HREF="#TheIwhileILoop">

The <I>while</I> Loop</A>

<UL>

<LI><A HREF="#ExampleUsingaIwhileILoop">

Example: Using a <I>while</I> Loop</A>

<LI><A HREF="#ExampleUsingaIwhileILoopinaProgram">

Example: Using a <I>while</I> Loop in a Program</A>

</UL>

<LI><A HREF="#TheIdowhileILoop">

The <I>do-while</I> Loop</A>

<UL>

<LI><A HREF="#ExampleUsingaIdowhileILoop">

Example: Using a <I>do-while</I> Loop</A>

<LI><A HREF="#ExampleUsingaIdowhileILoopinaProgram">

Example: Using a <I>do-while</I> Loop in a Program</A>

</UL>

<LI><A HREF="#Summary">

Summary</A>

<LI><A HREF="#ReviewQuestions">

Review Questions</A>

<LI><A HREF="#ReviewExercises">

Review Exercises</A>

</UL>



<HR>

<P>

A computer handles repetitive operations especially well-it never

gets bored, and it can perform a task as well the 10,000th time

as it did the first. Consider, for example, a disk file containing

10,000 names and addresses. If you tried to type labels for all

those people, you'd be seeing spots before your eyes in no time.

On the other hand, a printer (with the aid of a computer) can

tirelessly spit out all 10,000 labels-and with nary a complaint

to the union.

<P>

Every programming language must have some form of looping command

to instruct a computer to perform repetitive tasks. Java features

three types of looping: <TT>for</TT> loops, <TT>while</TT> loops,

and <TT>do-while</TT> loops. In this chapter, you learn about

the latter two types of loops. In the next chapter, you'll cover

<TT>for</TT> loops.

<P>

<CENTER>

<TABLE BORDER=1 WIDTH=80%>

<TR VALIGN=TOP><TD><B>NOTE</B></TD></TR>

<TR VALIGN=TOP><TD>

<BLOCKQUOTE>

In computer programs, looping is the process of repeatedly running a block of statements. Starting at the top of the block, the statements are executed until the program reaches the end of the block, at which point the program goes back to the top and 
starts over. The statements in the block may be repeated any number of times, from none to forever. If a loop continues on forever, it is called an infinite loop.</BLOCKQUOTE>



</TD></TR>

</TABLE>

</CENTER>

<P>

<H2><A NAME="TheIwhileILoop"><FONT SIZE=5 COLOR=#Ff0000>

The <I>while</I> Loop</FONT></A></H2>

<P>

One type of loop you can use in your programs is the <TT>while</TT>

loop, which continues running until its control expression becomes

false. The control expression is a logical expression, much like

the logical expressions you used with <TT>if</TT> statements.

In other words, any expression that evaluates to <TT>true</TT>

or <TT>false</TT> can be used as a control expression for a <TT>while</TT>

loop. Here's an example of simple <TT>while</TT> loop:

<BLOCKQUOTE>

<PRE>

num = 1;

while (num &lt; 10)

    ++num;

</PRE>

</BLOCKQUOTE>

<P>

Here the loop's control variable <TT>num</TT> is first set to

1. Then, at the start of the <TT>while</TT> loop, the program

compares the value in <TT>num</TT> with 10. If <TT>num</TT> is

less than 10, the expression evaluates to <TT>true</TT>, and the

program executes the body of the loop, which in this case is a

single statement that increments <TT>num</TT>. The program then

goes back and checks the value of <TT>num</TT> again. As long

as <TT>num</TT> is less than 10, the loop continues. But once

<TT>num</TT> equals 10, the control expression evaluates to <TT>false</TT>

and the loop ends.

<P>

<CENTER>

<TABLE BORDER=1 WIDTH=80%>

<TR VALIGN=TOP><TD><B>NOTE</B></TD></TR>

<TR VALIGN=TOP><TD>

<BLOCKQUOTE>

Notice how, in the previous example of a <TT>while</TT> loop, the program first sets the value of the control variable (<TT>num</TT>) to 1. Initializing your control variable before entering the <TT>while</TT> loop is extremely important. If you don't 
initialize the variable, you don't know what it might contain, and therefore the outcome of the loop is unpredictable. In the above example, if <TT>num</TT> happened to be greater than 10, the loop wouldn't happen at all. Instead, the loop's control 
expression would immediately evaluate to <TT>false</TT>, and the program would branch to the statement after the curly braces. Mistakes like this make programmers growl at their loved ones.

</BLOCKQUOTE>



</TD></TR>

</TABLE>

</CENTER>

<P>

<H3><A NAME="ExampleUsingaIwhileILoop">

Example: Using a <I>while</I> Loop</A></H3>

<P>

Although the previous example has only a single program line in

the body of the <TT>while</TT> loop, you can make a <TT>while</TT>

loop do as much as you want. As usual, to add more program lines,

you create a program block using braces. This program block tells

Java where the body of the loop begins and ends. For example,

suppose you want to create a loop that not only increments the

loop control variable, but also displays a message each time through

the loop. You might accomplish this task as shown in Listing 10.1.

<HR>

<BLOCKQUOTE>

<B>Listing 10.1&nbsp;&nbsp;LST10_1.TXT: Using a </B><I>while</I><B>

Loop.<BR>

</B>

</BLOCKQUOTE>

<BLOCKQUOTE>

<PRE>

num = 0;

while (num &lt; 10)

{

    ++num;

    String s = String.valueOf(num);

    g.drawString(&quot;num is now equal to:&quot;, 20, 40);

    g.drawString(s, 20, 55); 

}

</PRE>

</BLOCKQUOTE>

<HR>

<P>

<IMG ALIGN=RIGHT SRC="pseudo.gif" HEIGHT=94 WIDTH=94 BORDER=1>

<BLOCKQUOTE>

Initialize the loop control variable.<BR>

Check whether <TT>num</TT> is less than 10.<BR>

    Increment the loop control variable.<BR>

    Create a string from the value of <TT>num</TT>.<BR>

    Display a message on the screen.<BR>

    Display the value of <TT>num</TT>.<BR>

</BLOCKQUOTE>

<P>

<CENTER>

<TABLE BORDER=1 WIDTH=80%>

<TR VALIGN=TOP><TD><B>NOTE</B></TD></TR>

<TR VALIGN=TOP><TD>

<BLOCKQUOTE>

The <I>body </I>of a loop comprises the program lines that are executed when the loop control expression is true. Usually, the body of a loop is enclosed in braces, creating a program block.

</BLOCKQUOTE>



</TD></TR>

</TABLE>

</CENTER>

<P>

<P>

The pseudocode given after the listing illustrates how this <TT>while</TT>

loop works. The thing to notice is how all the statements that

Java should execute if the loop control expression is true are

enclosed by braces. As I mentioned previously, the braces create

a program block, telling Java where the body of the loop begins

and ends.

<P>

<CENTER>

<TABLE BORDER=1 WIDTH=80%>

<TR VALIGN=TOP><TD><B>CAUTION</B></TD></TR>

<TR VALIGN=TOP><TD>

<BLOCKQUOTE>

Always initialize (set the starting value of) any variable used in a <TT>while</TT> loop's control expression. Failure to do so may result in your program skipping over the loop entirely. (Initializing a variable means setting it to its starting value. If 
you need a variable to start at a specific value, you must initialize it yourself.) Also, be sure to increment or decrement the control variable as appropriate in the body of a loop. Failure to do this could result in an <I>infinite loop</I>, which is when 
the loop conditional never yields a true result, causing the loop to execute endlessly.

</BLOCKQUOTE>



</TD></TR>

</TABLE>

</CENTER>

<P>

<H3><A NAME="ExampleUsingaIwhileILoopinaProgram">

Example: Using a <I>while</I> Loop in a Program</A></H3>

<P>

As with most things in life, you learn best by doing. So, in this

example, you put together an applet that uses a <TT>while</TT>

loop to create its display. Listing 10.2 is the applet's source

code, whereas Listing 10.3 is the HTML document that loads and

runs the applet. Figure 10.1 shows the Applet8 applet running

in Appletviewer. If you need a reminder on how to compile and

run an applet, follow these steps:

<P>

<IMG SRC="f10-1.gif"><B> Figure 10.1 : </B><I>Applet8 running in Appletviewer.

</I></A><P>

<OL>

<LI>Type the source code shown in Listing 10.2 and save it in

your CLASSES folder, naming the file <TT>Applet8.java</TT>. (You

can copy the source code from the CD-ROM, if you like, and thus

save on typing.)

<LI>Compile the source code by typing <TT>javac Applet8.java</TT>

at the MS-DOS prompt, which gives you the <TT>Applet8.class</TT>

file.

<LI>Type the HTML document shown in Listing 10.3, and save it

to your CLASSES folder under the name APPLET8.htmlL.

<LI>Run the applet by typing, at the MS-DOS prompt, <TT>appletviewer

applet8.htmll</TT>.

</OL>

<HR>

<BLOCKQUOTE>

<B>Listing 10.2&nbsp;&nbsp;Applet8.java: An Applet That Uses a

</B><I>while</I><B> Loop.<BR>

</B>

</BLOCKQUOTE>

<BLOCKQUOTE>

<PRE>

import java.awt.*;

import java.applet.*;



public class Applet8 extends Applet

{

    TextField textField1;

    TextField textField2;



    public void init()

    {

        textField1 = new TextField(5);

        textField2 = new TextField(5);

        add(textField1);

        add(textField2);

        textField1.setText(&quot;1&quot;);

        textField2.setText(&quot;10&quot;);

    }



    public void paint(Graphics g)

    {

        g.drawString(&quot;Enter start and end values above.&quot;, 50, 45);

        String s = textField1.getText();

        int start = Integer.parseInt(s);

        s = textField2.getText();

        int end = Integer.parseInt(s);



        int row = 0;

        int count = start;

        while (count &lt;= end)

        {

            s = &quot;Count = &quot;;

            s += String.valueOf(count++);

            g.drawString(s, 80, row * 15 + 70);

            ++row;

        }

    }



    public boolean action(Event event, Object arg)

    {

        repaint();

        return true;

    }

}

</PRE>

</BLOCKQUOTE>

<HR>

<P>

<IMG ALIGN=RIGHT SRC="pseudo.gif" HEIGHT=94 WIDTH=94 BORDER=1>

<BLOCKQUOTE>

Tell Java that the program uses classes in the <TT>awt</TT> package.

<BR>

Tell Java that the program uses classes in the <TT>applet</TT>

package.<BR>

Derive the <TT>Applet8</TT> class from Java's <TT>Applet</TT>

class.<BR>

    Declare <TT>TextField</TT> objects called <TT>textField1</TT>

and <TT>textField2.<BR>

</TT>    Override the <TT>Applet</TT> class's <TT>init()</TT>

method.<BR>

        Create the two <TT>TextField</TT> objects.<BR>

        Add the two <TT>TextField</TT> objects to the applet.

<BR>

        Initialize the <TT>TextField</TT> objects to &quot;1&quot;

and &quot;10.&quot;<BR>

    Override the <TT>Applet</TT> class's <TT>paint()</TT> method.

<BR>

        Print a prompt for the user.<BR>

        Get the number from the first <TT>TextField</TT> object.

<BR>

        Convert the number from text to an integer.<BR>

        Get the number from the second <TT>TextField</TT> object.

<BR>

        Convert the number from text to an integer.<BR>

        Initialize the row counter.<BR>

        Initialize the loop control variable, count.<BR>

        Loop from the starting value to the ending value.<BR>

            Initialize a string to <TT>&quot;Count = &quot;</TT>.

<BR>

            Add the loop counter to the text string.<BR>

            Draw the text string in the applet's display area.

<BR>

            Increment the row counter.<BR>

    Override the <TT>Applet</TT> class's <TT>action()</TT> method.

<BR>

        Tell Java to redraw the applet's display area.<BR>

        Tell Java that the <TT>action()</TT> method finished successfully.

</BLOCKQUOTE>

<HR>

<BLOCKQUOTE>

<B>Listing 10.3&nbsp;&nbsp;APPLET8.htmlL: Applet8's HTML Document.

<BR>

</B>

</BLOCKQUOTE>

<BLOCKQUOTE>

<PRE>

&lt;title&gt;Applet Test Page&lt;/title&gt;

&lt;h1&gt;Applet Test Page&lt;/h1&gt;

&lt;applet

    code=&quot;Applet8.class&quot;

    width=250

    height=350

    name=&quot;Applet8&quot;&gt;

&lt;/applet&gt;

</PRE>

</BLOCKQUOTE>

<HR>

<P>

When you run Applet8, type the starting value for the loop in

the first box and the ending value for the loop in the second

box. (Don't press enter until you've entered both values.) When

you do, the program's <TT>while</TT> loop runs for the values

you selected, printing the value of the loop control variable

each time through the loop. For example, in Figure 10.1, the <TT>while</TT>

loop has counted from 1 to 10 (the default values for the <TT>TextField</TT>

controls). You can type any numbers you like, however. If you

typed 15 in the first box and 30 in the last box, the <TT>while</TT>

loop will count from 15 to 30, as shown in Figure 10.2.

<P>

<IMG SRC="f10-2.gif"><B> Figure 10.2 : </B><I>Applet8 will count however you tell it to.

</I></A><P><P>

<CENTER>

<TABLE BORDER=1 WIDTH=80%>

<TR VALIGN=TOP><TD><B>NOTE</B></TD></TR>

<TR VALIGN=TOP><TD>

<BLOCKQUOTE>

If you enter a pair of numbers with a wide range, the applet's output will run off the bottom of the applet. This won't hurt anything, but you'll be unable to see the entire output. In addition, if you make the starting value greater than the ending 
value, no output will appear in the applet's display area. This is because the <TT>while</TT> loop's conditional expression never evaluates to true.

</BLOCKQUOTE>



</TD></TR>

</TABLE>

</CENTER>

<P>

<H2><A NAME="TheIdowhileILoop"><FONT SIZE=5 COLOR=#Ff0000>

The <I>do-while</I> Loop</FONT></A></H2>

<P>

Java also features <TT>do-while</TT> loops. A <TT>do-while</TT>

loop is much like a <TT>while</TT> loop, except a <TT>do-while</TT>

loop evaluates its control expression at the end of the loop rather

than at the beginning. So the body of the loop-the statements

between the beginning and end of the loop-is always executed at

least once. In a <TT>while</TT> loop, the body of the loop may

or may not ever get executed. Listing 10.4 shows how a <TT>do-while</TT>

loop works.

<HR>

<BLOCKQUOTE>

<B>Listing 10.4&nbsp;&nbsp;LST10_4.TXT: Using a </B><I>do-while</I><B>

Loop.<BR>

</B>

</BLOCKQUOTE>

<BLOCKQUOTE>

<PRE>

num = 0;



do

    ++num;

while (num &lt; 10);

</PRE>

</BLOCKQUOTE>

<HR>

<P>

The difference between a <TT>do-while</TT> loop and a <TT>while</TT>

loop are readily apparent when you look at the listing. As you

can see, the loop's conditional expression is at the end instead

of the beginning. That is, in the example listing, <TT>num</TT>

will always be incremented at least once. After Java increments

<TT>num</TT>, it gets to the <TT>while</TT> line and checks whether

<TT>num</TT> is less than 10. If it is, program execution jumps

back to the beginning of the loop, where <TT>num</TT> gets incremented

again. Eventually, <TT>num</TT> becomes equal to 10, causing the

conditional expression to be false, and the loop ends.

<H3><A NAME="ExampleUsingaIdowhileILoop">

Example: Using a <I>do-while</I> Loop</A></H3>

<P>

Near the beginning of this chapter, you saw an example of a <TT>while</TT>

loop whose body contained multiple statements. By using braces

to mark off a program block, you can do the same thing with a

<TT>do-while</TT> loop. Listing 10.5 shows how to create a multiple

line <TT>do-while</TT> loop:

<HR>

<BLOCKQUOTE>

<B>Listing 10.5&nbsp;&nbsp;LST10_5.TXT: A Multiple-Line </B><I>do-while</I><B>

loop.<BR>

</B>

</BLOCKQUOTE>

<BLOCKQUOTE>

<PRE>

num = 0;



do

{

    ++num;

    String s = String.valueOf(num);

    g.drawString(&quot;num is now equal to:&quot;, 20, 40);

    g.drawString(s, 20, 55); 

}

while (num &lt; 10);

</PRE>

</BLOCKQUOTE>

<HR>

<P>

<IMG ALIGN=RIGHT SRC="pseudo.gif" HEIGHT=94 WIDTH=94 BORDER=1>

<BLOCKQUOTE>

Initialize the loop control variable.<BR>

Begin the <TT>do-while</TT> loop.<BR>

    Increment the loop control variable.<BR>

    Create a string from the value of <TT>num.<BR>

</TT>    Display a message on the screen.<BR>

    Display the value of <TT>num</TT>.<BR>

    Determine whether to repeat the loop.

</BLOCKQUOTE>

<H3><A NAME="ExampleUsingaIdowhileILoopinaProgram">

Example: Using a <I>do-while</I> Loop in a Program</A></H3>

<P>

Now it's time to put your knowledge of <TT>do-while</TT> loops

to the test. If you haven't yet picked up on the pattern, you

may be surprised to learn that the next applet is called Applet9.

Applet9 looks and acts a lot like Applet8. In fact, as far as

the user is concerned, they are almost exactly the same program.

However, the clever among you may have already guessed that Applet9

uses a <TT>do-while</TT> loop in place of the <TT>while</TT> loop.

This means that regardless of the values the user enters into

the applet's <TT>TextField</TT> controls, the applet will always

display at least one line of text. Listing 10.6 is the applet.

Modify the HTML document from Listing 10.3, replacing all occurrences

of Applet8 with Applet9, in order to run the new version of the

applet.

<HR>

<BLOCKQUOTE>

<B>Listing 10.6&nbsp;&nbsp;Applet9.java: Source Code for Applet9.

<BR>

</B>

</BLOCKQUOTE>

<BLOCKQUOTE>

<PRE>

import java.awt.*;

import java.applet.*;



public class Applet9 extends Applet

{

    TextField textField1;

    TextField textField2;



    public void init()

    {

        textField1 = new TextField(5);

        textField2 = new TextField(5);

        add(textField1);

        add(textField2);

        textField1.setText(&quot;1&quot;);

        textField2.setText(&quot;10&quot;);

    }



    public void paint(Graphics g)

    {

        g.drawString(&quot;Enter start and end values above.&quot;, 50, 45);

        String s = textField1.getText();

        int start = Integer.parseInt(s);

        s = textField2.getText();

        int end = Integer.parseInt(s);



        int row = 0;

        int count = start;



        do

        {

            s = &quot;Count = &quot;;

            s += String.valueOf(count++);

            g.drawString(s, 80, row * 15 + 70);

            ++row;

        }



        while (count &lt;= end);

    }



    public boolean action(Event event, Object arg)

    {

        repaint();

        return true;

    }

}

</PRE>

</BLOCKQUOTE>

<HR>

<P>

As long as the user always enters a lower value in the first box

and a higher value in the second, the Applet9 applet will perform

exactly as Applet8 did. However, the difference appears when the

starting value is greater than the ending value. Applet8 produced

no text output at all under these conditions, because the <TT>while</TT>

loop evaluates the condition before it executes the body of the

loop. As Figure 10.3 shows, Applet9 always displays at least one

line of text output, because the loop is evaluated after its body

is executed rather than before. In the figure, the user has entered

a starting value that's higher than the ending value.

<P>

<IMG SRC="f10-3.gif"><B> Figure 10.3 : </B><I>The do-while loop always executes at least once.



</I></A><P>

<H2><A NAME="Summary"><FONT SIZE=5 COLOR=#Ff0000>

Summary</FONT></A></H2>

<P>

By using loops, you can easily program your applets to perform

repetitive operations. Although loops may seem a little strange

to you at this point, you'll find more and more uses for them

as you write your own applets. Just remember that a <TT>while</TT>

loop may or may not ever execute depending on how the conditional

expressions works out. On the other hand, a <TT>do-while</TT>

loop always executes at least once because its conditional is

evaluated at the end of the loop rather than at the start. In

the next chapter, you'll learn about one last type of loop, called

a <TT>for</TT> loop. As you'll see, you use a <TT>for</TT> loop

when you know exactly how many times a loop must execute.

<H2><A NAME="ReviewQuestions"><FONT SIZE=5 COLOR=#Ff0000>

Review Questions</FONT></A></H2>

<OL>

<LI>When do you use loops in a program?

<LI>What is the body of a loop?

<LI>How does Java determine when to stop looping?

<LI>How many times is a <TT>while</TT> loop guaranteed to execute?

<LI>Why is it important to initialize a loop control variable?

<LI>What's an infinite loop?

<LI>Compare and contrast <TT>while</TT> and <TT>do-while</TT>

loops?

<LI>How many times will the loop shown in Listing 10.7 execute?

What will <TT>count</TT> equal when the loop finishes?

</OL>

<HR>

<BLOCKQUOTE>

<B>Listing 10.7&nbsp;&nbsp;LST10_7.TXT: The Loop for Review Question

8.<BR>

</B>

</BLOCKQUOTE>

<BLOCKQUOTE>

<PRE>

int count = 10;



do

{

    ++count;

}

while (count &lt;= 15);

</PRE>

</BLOCKQUOTE>

<HR>

<H2><A NAME="ReviewExercises"><FONT SIZE=5 COLOR=#Ff0000>

Review Exercises</FONT></A></H2>

<OL>

<LI>Write a <TT>while</TT> loop that executes 20 times.

<LI>Convert the <TT>while</TT> loop you wrote in exercise 1 to

a <TT>do-while</TT> loop.

<LI>Write a <TT>while</TT> loop that will result in an infinite

loop.

<LI>Write a <TT>do-while</TT> loop that can never execute more

than once.

<LI>Write a <TT>while</TT> loop that counts backwards from 20

to 10.

<LI>Modify Applet8 so that it totals all the numbers from the

user's selected starting value to the ending value. That is, if

the user enters 10 and 15 as the starting and ending values, the

applet should sum 10, 11, 12, 13, 14, and 15, and then display

the result. Name the program <TT>WhileApplet.java</TT>. Figure

10.4 shows what the final applet should look like. (You can find

the solution to this programming problem in the CHAP07 folder

of this book's CD-ROM.)<BR>

<IMG SRC="f10-4.gif"><B> Figure 10.4 : </B><I>This is what the WhileApplet applet should <r>look like.



</I></A><P>

</OL>

<HR>



<CENTER><P><A HREF="ch9.html"><IMG SRC="pc.gif" BORDER=0 HEIGHT=88 WIDTH=140></A>

<A HREF="#CONTENTS"><IMG SRC="cc.gif" BORDER=0 HEIGHT=88 WIDTH=140></A>

<A HREF="index.html"><IMG SRC="hb.gif" BORDER=0 HEIGHT=88 WIDTH=140></A>

<A HREF="ch11.html"><IMG SRC="nc.gif" BORDER=0 HEIGHT=88 WIDTH=140></A>

<HR WIDTH="100%"></P></CENTER>

</BODY>

</HTML>