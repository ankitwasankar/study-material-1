<HTML>

<HEAD>

<TITLE>Chapter 35 -- Using the Interpreter</TITLE>



<META>

</HEAD>

<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000EE" VLINK="#551A8B" ALINK="#CE2910">

<H1><FONT SIZE=6 COLOR=#Ff0000>Chapter&nbsp;35</FONT></H1>

<H1><FONT SIZE=6 COLOR=#Ff0000>Using the Interpreter</FONT></H1>

<HR>

<P>

<CENTER><B><FONT SIZE=5><A NAME="CONTENTS">CONTENTS</A></FONT></B></CENTER>

<UL>

<LI><A HREF="#WhattheInterpreterDoes">

What the Interpreter Does</A>

<LI><A HREF="#RunningtheInterpreter">

Running the Interpreter</A>

<UL>

<LI><A HREF="#KeepingFilesUptoDate">

Keeping Files Up to Date</A>

<LI><A HREF="#SettingtheClassPath">

Setting the Class Path</A>

<LI><A HREF="#SwitchingOnVerboseOutput">

Switching On Verbose Output</A>

<LI><A HREF="#ExampleRunninganApplicationwithVerboseOutput">

Example: Running an Application with Verbose Output</A>

<LI><A HREF="#GettingHelp">

Getting Help</A>

</UL>

<LI><A HREF="#Summary">

Summary</A>

<LI><A HREF="#ReviewQuestions">

Review Questions</A>

<LI><A HREF="#ReviewExercises">

Review Exercises</A>

</UL>



<HR>

<P>

When you're running applets from within a Web browser, you don't

have to be concerned with the Java interpreter and how it executes

Java programs. However, the only way to run Java Standalone applications

is by loading them directly into the interpreter. These means

typing a command line in much the same way you did for compiling

files. The command line not only tells the Java interpreter which

program you want to run, but also the command-line options you

want to use when running the program. In this chapter, you study

the Java interpreter in detail.

<H2><A NAME="WhattheInterpreterDoes"><FONT SIZE=5 COLOR=#Ff0000>

What the Interpreter Does</FONT></A></H2>

<P>

As you learned in the previous chapter, the Java compiler converts

your Java source code into a .CLASS file. Unlike the files created

by a C compiler, which creates output files that are executable

only on a specific type of computer, this .CLASS file is in a

special format that is transportable between various computer

systems. A .CLASS file contains byte-code information that represents

the commands in your original source code.

<P>

The key to this intersystem transportability is the Java interpreter.

Although a Java byte-code file can be run on any Java-compatible

system, the Java interpreter must be created specifically for

each system that needs to run Java programs. Therefore, the Java

interpreter for the Macintosh will not run on a Windows system,

even though both systems can execute the same byte-code file.

<P>

In the previous chapter, you saw a figure that illustrated the

relationship between Java source-code files, compilers, byte-code

files, and the different interpreters. Figure 35.1 reprints that

figure for your convenience in this discussion.

<P>

<IMG SRC="f35-1.gif"><B> Figure 35.1 : </B><I>The relationship between the various components of the Java system.



</I></A><P>

<P>

When the user installs Java on his system, he must install the

correct version for that system. Once the installation is complete,

the user can connect to the Internet and view any Java applets

that may be contained in the Web pages he downloads. These applets

are interpreted and executed automatically by Java, thanks to

the connection between the Java-compatible browser and the Java

system.

<P>

The only time the user must be concerned with the interpreter

directly is when he wants to run a Java application, which is

represented in the same kind of byte-code (.CLASS) file as an

applet. The difference is that Java standalone applications cannot

be executed from within a Web browser. Instead, the user runs

them from his system's command line, invoking the interpreter

&quot;by hand,&quot; as it were.

<H2><A NAME="RunningtheInterpreter"><FONT SIZE=5 COLOR=#Ff0000>

Running the Interpreter</FONT></A></H2>

<P>

In <A HREF="ch32.html" >Chapter 32</A>, &quot;Writing Java Applications,&quot; you got

a brief look at the process of creating and running Java standalone

applications. In that chapter, you learned that you can run a

Java application with the following command:

<BLOCKQUOTE>

<PRE>

java filename

</PRE>

</BLOCKQUOTE>

<P>

In this command, <TT>filename</TT> is the name of the application's

.CLASS file. For example, if you wanted to run an application

called MyApp, your command line would look like this:

<BLOCKQUOTE>

<PRE>

java MyApp

</PRE>

</BLOCKQUOTE>

<P>

Notice that, unlike the compiler, the interpreter doesn't require

the source file's extension. In fact, if you include the file

extension, the interpreter generates an error (Figure 35.2). This

is because the interpreter is not able to tell the difference

between a fully qualified class name (which uses dots) and a file

name with an extension (which also uses a dot). Also, the interpreter

expects upper- or lowercase letters in a file name. The file name

MyApp, MYAPP, and myapp are all different to Java's interpreter.

<P>

<IMG SRC="f35-2.gif"><B> Figure 35.2 : </B><I>Unlike the compiler, the Java interpreter will not accept file extensions.



</I></A><P>

<P>

Like the compiler, the Java interpreter recognizes a set of command-line

options that you can use to tailor the how the interpreter runs.

Those options are listed in Table 35.1.<BR>

<P>

<CENTER><B>Table 35.1&nbsp;&nbsp;Command Options for the Java

Interpreter.</B></CENTER>

<P>

<CENTER>

<TABLE BORDER=1 WIDTH=80%>

<TR VALIGN=TOP><TD WIDTH=166><I><B>Option</B></I></TD><TD WIDTH=424><I><B>Description</B></I>

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=166><TT>-checksource</TT></TD><TD WIDTH=424>Instructs the interpreter to run the compiler on files that are not up to date.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=166><TT>-classpath path</TT></TD><TD WIDTH=424>Determines the path in which the compiler looks for classes.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=166><TT>-cs</TT></TD><TD WIDTH=424>Same as <TT>-checksource</TT>.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=166><TT>-D</TT></TD><TD WIDTH=424>Instructs the interpreter to set a property value.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=166><TT>-debug</TT></TD><TD WIDTH=424>Runs the debugger along with the application.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=166><TT>-help</TT></TD><TD WIDTH=424>Displays the commands you can use with the interpreter.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=166><TT>-ms x</TT></TD><TD WIDTH=424>Specifies the amount of memory allocated at startup.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=166><TT>-mx x</TT></TD><TD WIDTH=424>Specifies the maximum amount of memory that can be allocated for the session.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=166><TT>-noasyncgc</TT></TD><TD WIDTH=424>Tells Java not to use asynchronous garbage collection.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=166><TT>-noverify</TT></TD><TD WIDTH=424>Tells the interpreter not to verify code.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=166><TT>-oss x</TT></TD><TD WIDTH=424>Specifies the maximum stack size for Java code.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=166><TT>-ss x</TT></TD><TD WIDTH=424>Specifies the maximum stack size for C code.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=166><TT>-v</TT></TD><TD WIDTH=424>Specifies that the interpreter should display status information as it works.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=166><TT>-verbose</TT></TD><TD WIDTH=424>Same as <TT>-v</TT>.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=166><TT>-verbosegc</TT></TD><TD WIDTH=424>Specifies that the garbage collector should display status information as it works.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=166><TT>-verify</TT></TD><TD WIDTH=424>Tells the interpreter to verify all Java code.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=166><TT>-verifyremote</TT></TD><TD WIDTH=424>Tells the interpreter to verify code loaded by a classloader. This option is the default.

</TD></TR>

</TABLE>

</CENTER>

<P>

<P>

As you can see, the interpreter can accept quite a few command-line

options. Of these options, though, only a few are used frequently.

You'll get a look at those more useful options in the sections

that follow.

<H3><A NAME="KeepingFilesUptoDate">

Keeping Files Up to Date</A></H3>

<P>

When you're working on a new application, you'll make frequent

changes to the source code. Whenever you change the source code,

you must recompile the program before you run it. Otherwise, you'll

be running an old version of the program. When you start writing

larger applications, you'll have many files for the classes that

are used in the program. As you change the contents of these files,

you may lose track of which files need to be recompiled. This

is where the interpreter's <TT>-checksource</TT> command-line

option comes into play.

<P>

The <TT>-checksource</TT> option tells the interpreter to compare

the dates and times of your source-code files with the dates and

times of the matching .CLASS files. When a source-code file is

newer than the matching .CLASS file, the interpreter automatically

runs the compiler to bring the files up to date. You use the <TT>-checksource</TT>

option like this:

<BLOCKQUOTE>

<PRE>

java -checksource appname

</PRE>

</BLOCKQUOTE>

<P>

Here, <TT>appname</TT> is the name of the class you want the interpreter

to run.

<P>

<CENTER>

<TABLE BORDER=1 WIDTH=80%>

<TR VALIGN=TOP><TD><B>NOTE</B></TD></TR>

<TR VALIGN=TOP><TD>

<BLOCKQUOTE>

When running a standalone application, any arguments that you place after the name of the file to execute are passed to the application's <TT>main()</TT> method. For more information on handling these application arguments, please refer to <A 
HREF="ch32.html" >Chapter 32</A>, &quot;Writing Java Applications.&quot;

</BLOCKQUOTE>



</TD></TR>

</TABLE>

</CENTER>

<P>

<H3><A NAME="SettingtheClassPath">

Setting the Class Path</A></H3>

<P>

In order to run a standalone application, the interpreter usually

needs to load class files that are used by the program. These

files might be files that you've created for custom classes or

they may be the class files that make up the class hierarchy of

the class you're executing. When you derive your applet from Java's

<TT>Applet</TT> class, for example, the interpreter needs to load

the <TT>Applet</TT> class, as well as <TT>Applet</TT>'s superclasses,

in order to run your application. Before the interpreter can access

these class files, it has to know where they are.

<P>

Normally, when you run a program, the interpreter finds classes

using the current setting of your system's CLASSPATH variable,

whose default value is the folder that contains Java's classes.

Java will also look in the active folder (the one you're in when

you type the <TT>java </TT>command line). However, you can change

the setting of CLASSPATH temporarily for the current program run

by using the <TT>-classpath</TT> option, like this:

<BLOCKQUOTE>

<PRE>

java -classpath path FileName

</PRE>

</BLOCKQUOTE>

<P>

In the preceding line, <TT>path </TT>is the path you want to include,

each separated by a semicolon. For example, assuming that you

installed Java in a folder called C:\JAVA and that your own classes

are in the C:\CLASSES folder, the following line runs your program

using the same settings the interpreter would use by default:

<BLOCKQUOTE>

<PRE>

java -classpath c:\java\lib\classes.zip;c:\classes FileName

</PRE>

</BLOCKQUOTE>

<P>

Notice that Java's classes are in a file called CLASSES.ZIP. You

must include this file name in the path in order for the interpreter

to find the classes it needs to successfully run your applet.

<H3><A NAME="SwitchingOnVerboseOutput">

Switching On Verbose Output</A></H3>

<P>

When you run the Java interpreter with no command-line option,

the compiler runs and performs its task without displaying information

on the screen. Sometimes, though, you may want to know what files

the interpreter is loading and where those files are being loaded

from. You can make the interpreter report to you as it works by

using the <TT>-verbose</TT> option, like this:

<BLOCKQUOTE>

<PRE>

java -verbose applet.java

</PRE>

</BLOCKQUOTE>

<H3><A NAME="ExampleRunninganApplicationwithVerboseOutput">

Example: Running an Application with Verbose Output</A></H3>

<P>

To see what happens when you use the <TT>-verbose</TT> (or <TT>-v</TT>)

command-line option, copy the SimpleApp.class file from the CHAP35

folder of this book's CD-ROM to your CLASSES folder. Then start

an MS-DOS session and type the following command at the prompt:

<BLOCKQUOTE>

<PRE>

java -verbose SimpleApp

</PRE>

</BLOCKQUOTE>

<P>

When you press Enter, the interpreter runs, loading the application

and displaying all the additional files it has to access in order

to run the application. Figure 35.3 shows a portion of this output.

Bet you didn't expect such a simple program could make the interpreter

work so hard!

<P>

<IMG SRC="f35-3.gif"><B> Figure 35.3 : </B><I>The -verbose option enables you to see what files are being loaded by the interpreter.



</I></A><P>

<P>

<CENTER>

<TABLE BORDER=1 WIDTH=80%>

<TR VALIGN=TOP><TD><B>TIP</B></TD></TR>

<TR VALIGN=TOP><TD>

<BLOCKQUOTE>

A special version of the Java interpreter can trace and display every command that's executed in your application. (You can find this tool in your JAVA\BIN folder, along with the other Java tools.) To invoke this special option, type <TT>java_g -t 
AppName</TT> at your system prompt. The <TT>AppName</TT> portion of the command is the name of the .CLASS file you want to run, without the file extension. Figure 35.4 shows a small portion of the output generated by this command. Even a small application 
results in many pages of trace information.

</BLOCKQUOTE>



</TD></TR>

</TABLE>

</CENTER>

<P>

<IMG SRC="f35-4.gif"><B> Figure 35.4 : </B><I>The java_g -t command displays every command executed in your application.



</I></A><P>

<H3><A NAME="GettingHelp">

Getting Help</A></H3>

<P>

The Java interpreter has a long list of command, so you'll probably

have a hard time remembering them all. Luckily, you can get a

quick reminder of what the commands are and what they do. To get

this information, type the following command:

<BLOCKQUOTE>

<PRE>

java -help

</PRE>

</BLOCKQUOTE>

<P>

When you do, you'll see the display shown in Figure 35.5. For

more information than is displayed in the help listing, check

this chapter or your online Java documentation.

<P>

<IMG SRC="f35-5.gif"><B> Figure 35.5 : </B><I>The Java interpreter features a built-in help display.



</I></A><P>

<H2><A NAME="Summary"><FONT SIZE=5 COLOR=#Ff0000>

Summary</FONT></A></H2>

<P>

When you are using a Java-compatible Web browser to view applets,

you don't need to be concerned with the Java interpreter. The

browser displays the applets for you automatically. However, if

you want to run a standalone Java application, you must invoke

the interpreter from your system's command line. The interpreter

accepts over a dozen different command-line options, although

only a few are regularly useful to novice and intermediate Java

programmers.

<H2><A NAME="ReviewQuestions"><FONT SIZE=5 COLOR=#Ff0000>

Review Questions</FONT></A></H2>

<OL>

<LI>What happens if you fail to include the file extension when

specifying your source-code file to the interpreter?

<LI>What extension do byte-code files-the files that the interpreter

understands- have?

<LI>What are the two ways you can specify the verbose interpreter

option?

<LI>When writing a Java application, what do you use first, the

compiler or the interpreter?

<LI>How can you get a list of commands that the interpreter understands?

<LI>Why do you need to use an interpreter?

<LI>What does the <TT>-checksource</TT> command-line option do?

</OL>

<H2><A NAME="ReviewExercises"><FONT SIZE=5 COLOR=#Ff0000>

Review Exercises</FONT></A></H2>

<OL>

<LI>Run one of the applications from <A HREF="ch32.html" >Chapter 32</A>, instructing the

interpreter to check whether the .CLASS file is up to date with

the .java file.

<LI>Run an application with the verbose setting, and study the

information the interpreter displays on the screen.

</OL>

<HR>



<CENTER><P><A HREF="ch34.html"><IMG SRC="pc.gif" BORDER=0 HEIGHT=88 WIDTH=140></A>

<A HREF="#CONTENTS"><IMG SRC="cc.gif" BORDER=0 HEIGHT=88 WIDTH=140></A>

<A HREF="index.html"><IMG SRC="hb.gif" BORDER=0 HEIGHT=88 WIDTH=140></A>

<A HREF="ch36.html"><IMG SRC="nc.gif" BORDER=0 HEIGHT=88 WIDTH=140></A>

<HR WIDTH="100%"></P></CENTER>

</BODY>

</HTML>