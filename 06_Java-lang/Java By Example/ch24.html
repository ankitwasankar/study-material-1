<HTML>

<HEAD>

<TITLE>Chapter 24 -- Dialog Boxes</TITLE>



<META>

</HEAD>

<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000EE" VLINK="#551A8B" ALINK="#CE2910">

<H1><FONT SIZE=6 COLOR=#Ff0000>Chapter&nbsp;24</FONT></H1>

<H1><FONT SIZE=6 COLOR=#Ff0000>Dialog Boxes</FONT></H1>

<HR>

<P>

<CENTER><B><FONT SIZE=5>CONTNETS</FONT></B></CENTER>

<UL>

<LI><A HREF="#UsingaDialogBox">

Using a Dialog Box</A>

<UL>

<LI><A HREF="#CreatingtheDialogBox">

Creating the Dialog Box</A>

<LI><A HREF="#CreatingtheDialogBoxsLayout">

Creating the Dialog Box's Layout</A>

<LI><A HREF="#DisplayingtheDialogBox">

Displaying the Dialog Box</A>

<LI><A HREF="#RemovingtheDialogBox">

Removing the Dialog Box</A>

<LI><A HREF="#MethodsoftheDialogClass">

Methods of the Dialog Class</A>

<LI><A HREF="#ExampleADialogBoxforTextInput">

Example: A Dialog Box for Text Input</A>

</UL>

<LI><A HREF="#Summary">

Summary</A>

<LI><A HREF="#ReviewQuestions">

Review Questions</A>

<LI><A HREF="#ReviewExercises">

Review Exercises</A>

</UL>



<HR>

<P>

In most cases, you'll add controls to your applet's display in

order to present information to the user or to obtain information

from the user. However, there may be times when you prefer to

create a dialog box. For example, when the applet encounters some

sort of error, a pop-up dialog box not only supplies the user

with important information, but also immediately draws his attention

to that information. Although Java supports dialog boxes, they

unfortunately can only be associated with a frame window. This

requirement limits their usefulness, but you still may want to

use a dialog box at one time or another. In this chapter, you'll

see how.

<H2><A NAME="UsingaDialogBox"><FONT SIZE=5 COLOR=#Ff0000>

Using a Dialog Box</FONT></A></H2>

<P>

To create, display, and handle a dialog box, you must perform

the following steps: 

<OL>

<LI>Create the dialog box object.

<LI>Create and set a layout manager for the dialog box.

<LI>Create controls and add them to the dialog box.

<LI>Call the dialog's <TT>show()</TT> method to display the dialog

box.

<LI>When the user clicks the OK or Cancel button, call the dialog's

<TT>hide()</TT> method to remove the dialog box from the screen.

<LI>Extract and process the data, if any, entered into the dialog

box's controls.

</OL>

<P>

The following section discuss the above steps in greater detail.

<H3><A NAME="CreatingtheDialogBox">

Creating the Dialog Box</A></H3>

<P>

Java's dialog boxes are objects of the <TT>Dialog</TT> class.

So, to create a dialog box object, you first call the <TT>Dialog</TT>

class's constructor, like this:

<BLOCKQUOTE>

<PRE>

Dialog dialog = new Dialog(frame, title, modal);

</PRE>

</BLOCKQUOTE>

<P>

The constructor's three arguments refer to a frame window, the

dialog box's title, and <TT>boolean</TT> value indicating whether

the dialog box is modal (<TT>true</TT>) or modeless (<TT>false</TT>).

A modal dialog box, which is the most common of the two types,

retains the focus until the user dismisses it. This forces the

user to respond to the dialog box before continuing with the program.

A modeless dialog box can lose the focus to another window, which

means that the user can switch to another window even while the

dialog box is still on the screen.

<P>

<CENTER>

<TABLE BORDER=1 WIDTH=80%>

<TR VALIGN=TOP><TD><B>NOTE</B></TD></TR>

<TR VALIGN=TOP><TD>

<BLOCKQUOTE>

Although Java claims to support both modal and modeless dialog boxes, the constructor's argument doesn't seem to make any difference. In my experience, every Java dialog box is modeless. Maybe this inconsistency will be corrected by the time you read this 
book.</BLOCKQUOTE>



</TD></TR>

</TABLE>

</CENTER>

<P>

<H3><A NAME="CreatingtheDialogBoxsLayout">

Creating the Dialog Box's Layout</A></H3>

<P>

Once you have the dialog box object created, you must give it

a layout manager. If you fail to do this, any components you try

to place in the dialog box will not appear. You perform this step

exactly as you would for any other type of window or applet, by

creating and setting the layout object:

<BLOCKQUOTE>

<PRE>

FlowLayout layout = new FlowLayout();

dialog.setLayout(layout);

</PRE>

</BLOCKQUOTE>

<P>

The next step is to create and add whatever controls you want

to appear in the dialog box. You'll always have at least an OK

button, with which the user can dismiss the dialog box:

<BLOCKQUOTE>

<PRE>

Button button = new Button(&quot;OK&quot;);

dialog.add(button);

</PRE>

</BLOCKQUOTE>

<H3><A NAME="DisplayingtheDialogBox">

Displaying the Dialog Box</A></H3>

<P>

Just like a frame window, a dialog box doesn't appear on the screen

until you call its <TT>show()</TT> method, like this:

<BLOCKQUOTE>

<PRE>

dialog.show();

</PRE>

</BLOCKQUOTE>

<P>

Once the dialog box is on the screen, the user can manipulate

its controls in order to enter information into the dialog box's

fields or to dismiss the dialog box from the screen.

<H3><A NAME="RemovingtheDialogBox">

Removing the Dialog Box</A></H3>

<P>

When the user clicks a dialog box's OK or Cancel buttons, that's

your applet's signal to remove the dialog box from the screen,

which you do by calling its <TT>hide()</TT> method:

<BLOCKQUOTE>

<PRE>

dialog.hide();

</PRE>

</BLOCKQUOTE>

<P>

The <TT>hide()</TT> method removes the dialog box from the screen,

but the dialog box and its controls remain in memory so that you

can access them in order to extract whatever information the user

may have entered into the dialog box.

<P>

After you've removed the dialog box from the screen, you can use

a control's methods to extract whatever information the user may

have entered into the dialog's controls. For example, to get the

entry from a text field control, you'd call the control's <TT>getText()</TT>

method.

<H3><A NAME="MethodsoftheDialogClass">

Methods of the Dialog Class</A></H3>

<P>

Like any class, <TT>Dialog</TT> provides a set of public methods

that you can use to control the dialog box. <TT>Dialog</TT> also

inherits many methods from its superclasses, <TT>Window</TT> and

<TT>Container</TT>. Table 24.1 lists the most useful methods of

the <TT>Dialog</TT> class, including those methods inherited from

the <TT>Window</TT> and <TT>Container</TT> classes.<BR>

<P>

<CENTER><B>Table 24.1&nbsp;&nbsp;Useful Methods of the </B><I>Dialog</I><B>

Class (Including Inherited).</B></CENTER>

<P>

<CENTER>

<TABLE BORDER=1 WIDTH=80%>

<TR VALIGN=TOP><TD WIDTH=295><I><B>Method</B></I></TD><TD WIDTH=295><I><B>Description</B></I>

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>Component add(Component comp)</TT></TD>

<TD WIDTH=295>Adds a component to the dialog box.</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>void dispose()</TT></TD><TD WIDTH=295>Removes the dialog box from memory.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>LayoutManager getLayout()</TT></TD><TD WIDTH=295>Returns the dialog's layout manager.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>String getTitle()</TT></TD><TD WIDTH=295>Returns the dialog box's title.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>void hide()</TT></TD><TD WIDTH=295>Removes the dialog box from the screen.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>Boolean isModal()</TT></TD><TD WIDTH=295>Returns <TT>true</TT> if the dialog box is modal.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>Boolean isResizable()</TT></TD><TD WIDTH=295>Returns <TT>true</TT> if the dialog box is resizable.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>Component locate(int x, int y)</TT></TD>

<TD WIDTH=295>Returns the component at the given location.</TD>

</TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>void remove(Component comp)</TT></TD><TD WIDTH=295>Removes a component from the dialog box.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>void removeAll()</TT></TD><TD WIDTH=295>Removes all components.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>void setLayout(LayoutManager mgr)</TT></TD>

<TD WIDTH=295>Sets the dialog's layout manager.</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>void setResizable(boolean</TT></TD><TD WIDTH=295>Sets the resizable attribute.<TT>resizable)</TT>

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>void setTitle(String title)</TT></TD><TD WIDTH=295>Sets the dialog box's title.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>void show()</TT></TD><TD WIDTH=295>Displays the dialog box.

</TD></TR>

</TABLE>

</CENTER>

<P>

<H3><A NAME="ExampleADialogBoxforTextInput">

Example: A Dialog Box for Text Input</A></H3>

<P>

Your last task in this chapter is to put your newly acquired knowledge

of dialog boxes to work. Listing 24.1 is an applet that enables

you to display a frame window. From the frame window's menu bar,

you can select a command that displays a dialog box. This dialog

box contains an OK button for dismissing the dialog box and a

text field for entering information. When you dismiss the dialog

box, the text you entered into the text field control appears

in the frame window. Figure 24.1 shows the applet, the frame window,

and the dialog box.

<P>

<IMG SRC="f24-1.gif"><B> Figure 24.1 : </B><I>This is DialogApplet running under Appletviewer.



</I></A><P>

<HR>

<BLOCKQUOTE>

<B>Listing 24.1&nbsp;&nbsp;DialogApplet.java: An Applet That Displays

a Dialog Box.<BR>

</B>

</BLOCKQUOTE>

<BLOCKQUOTE>

<PRE>

import java.awt.*;

import java.applet.*;



public class DialogApplet extends Applet

{

    DialogFrame frame;

    Button button;



    public void init()

    {

          frame = new DialogFrame(&quot;Dialog Window&quot;);



          button = new Button(&quot;Show Window&quot;);

          add(button);

    }





    public boolean action(Event evt, Object arg)

    {

        boolean visible = frame.isShowing();

        if (visible)

        {

            frame.hide();

            button.setLabel(&quot;Show Window&quot;);

        }

        else

        {

            frame.show();

            button.setLabel(&quot;Hide Window&quot;);

        }



        return true;

    }

}



class DialogFrame extends Frame

{

    MenuBar menuBar;

    Dialog dialog;

    TextField textField;

    String str;



    DialogFrame(String title)

    {

        super(title);



        menuBar = new MenuBar();

        setMenuBar(menuBar);

        Menu menu = new Menu(&quot;Test&quot;);

        menuBar.add(menu);

        MenuItem item = new MenuItem(&quot;Dialog box&quot;);

        menu.add(item);



        str = &quot;&quot;;

    }



    public void paint(Graphics g)

    {

        resize(300, 250);



        g.drawString(&quot;THE TEXT YOU ENTERED IS:&quot;, 70, 50);

        g.drawString(str, 70, 70);

    }



    public boolean action(Event evt, Object arg)

    {

        if (evt.target instanceof MenuItem)



 {

            if (arg == &quot;Dialog box&quot;)

                ShowDialogBox();

        }

        else if (evt.target instanceof Button)

        {

            if (arg == &quot;OK&quot;)

            {

                dialog.hide();

                str = textField.getText();

                repaint();

            }

        }



        return true;

    }



    protected void ShowDialogBox()

    {

        dialog = new Dialog(this, &quot;Test Dialog&quot;, true);

        FlowLayout layout = new FlowLayout();

        dialog.setLayout(layout);



        textField = new TextField(&quot;&quot;, 20);

        Button button = new Button(&quot;OK&quot;);

        dialog.add(button);

        dialog.add(textField);



        dialog.show();

        dialog.resize(200, 100);

    }

}

</PRE>

</BLOCKQUOTE>

<HR>

<P>

<IMG ALIGN=RIGHT SRC="pseudo.gif" HEIGHT=94 WIDTH=94 BORDER=1>

<BLOCKQUOTE>

Tell Java that the applet uses the classes in the <TT>awt</TT>

package.<BR>

Tell Java that the applet uses the classes in the <TT>applet</TT>

package.<BR>

Derive the <TT>DialogApplet</TT> class from Java's <TT>Applet</TT>

class.<BR>

    Declare the frame-window and button objects.<BR>

    Override the <TT>init()</TT> method.<BR>

        Create the frame window.<BR>

        Create and add the button component.<BR>

    Override the <TT>action()</TT> method.<BR>

        Determine whether the frame window is visible.<BR>

        If the window is visible...<BR>

            Hide the window.<BR>

            Change the button's label to &quot;Show Window.&quot;

<BR>

        Else if the window is hidden...<BR>

            Show the window.<BR>

            Set the window's size.<BR>

            Change the button's label to &quot;Hide Window.&quot;

<BR>

        Tell Java that the message was handled okay.<BR>

Define the frame window class.<BR>

    Declare objects needed by the class.<BR>

    Define the class's constructor.<BR>

        Initialize the superclass (Frame).<BR>

        Create the window's menu bar.<BR>

        Initialize the display string.<BR>

    Override the <TT>paint()</TT> method.<BR>

        Resize the frame window.<BR>

        Draw the display text in the window.<BR>

    Override the <TT>action()</TT> method.<BR>

        If the &quot;Dialog Box&quot; command was selected, create

the dialog.<BR>

        Else if the OK button was selected<BR>

            Hide the dialog box.<BR>

            Get the contents of the dialog's test field.<BR>

            Tell Java to repaint the frame window.<BR>

        Tell Java that the event was handled.<BR>

    Define the <TT>ShowDialogBox()</TT> method.<BR>

        Create the new dialog box and set its layout.<BR>

        Create and add components to the dialog box.<BR>

        Display and resize the dialog box.<BR>

</BLOCKQUOTE>

<P>

<CENTER>

<TABLE BORDER=1 WIDTH=80%>

<TR VALIGN=TOP><TD><B>NOTE</B></TD></TR>

<TR VALIGN=TOP><TD>

<BLOCKQUOTE>

In addition to normal dialog boxes, Java supports file dialog boxes for loading and saving files. The file dialogs are represented by the <TT>FileDialog</TT> class. However, because Java applets have extremely limited access to files, file dialog boxes 
are not covered here.

</BLOCKQUOTE>



</TD></TR>

</TABLE>

</CENTER>

<P>

<H2><A NAME="Summary"><FONT SIZE=5 COLOR=#Ff0000>

Summary</FONT></A></H2>

<P>

You probably won't have much call for dialog boxes in your Java

applets, but it's always good to know they're there when you need

them. Using dialog boxes in conjunction with a frame window, you

can inform the user of critical problems, as well as obtain information

from the user without cluttering your main window with controls.

Because dialog boxes are much like other display windows in Java,

you can set up layout managers, add components, and control the

dialog box using the many methods defined in the <TT>Dialog</TT>

class or inherited from the class's superclasses.

<H2><A NAME="ReviewQuestions"><FONT SIZE=5 COLOR=#Ff0000>

Review Questions</FONT></A></H2>

<OL>

<LI>What are the three arguments accepted by the <TT>Dialog</TT>

class's constructor?

<LI>How do you display and hide a dialog box?

<LI>Why are frame windows important to dialog boxes?

<LI>What is the one control every dialog box should have?

<LI>What's the difference between modal and modeless dialog boxes?

<LI>How do you add components to the dialog box?

</OL>

<H2><A NAME="ReviewExercises"><FONT SIZE=5 COLOR=#Ff0000>

Review Exercises</FONT></A></H2>

<OL>

<LI>Write the code needed to create and display a dialog box with

the title &quot;Test Dialog&quot; and with two button controls.

<LI>Write an applet that can display a dialog box with a 2<FONT FACE="Symbol">&#180;</FONT>2

grid containing four buttons.

<LI>Modify DialogApplet so that the dialog box has both an OK

and a Cancel button. If the user clicks the Cancel button, the

dialog should be removed from the screen, but the string that

was entered into the text field control should be ignored. Figure

24.2 shows the resultant applet, called DialogApplet2. (You can

find the solution to this exercise in the CHAP24 folder of this

book's CD-ROM.)

</OL>

<P>

<IMG SRC="f24-2.gif"><B> Figure 24.2 : </B><I>This is the DialogApplet2 applet run-<r>ning under Appletviewer.



</I></A><P>

<HR>



<CENTER><P><A HREF="ch23.html"><IMG SRC="pc.gif" BORDER=0 HEIGHT=88 WIDTH=140></A>

<A HREF="#CONTENTS"><IMG SRC="cc.gif" BORDER=0 HEIGHT=88 WIDTH=140></A>

<A HREF="index.html"><IMG SRC="hb.gif" BORDER=0 HEIGHT=88 WIDTH=140></A>

<A HREF="ch25.html"><IMG SRC="nc.gif" BORDER=0 HEIGHT=88 WIDTH=140></A>

<HR WIDTH="100%"></P></CENTER>

</BODY>

</HTML>