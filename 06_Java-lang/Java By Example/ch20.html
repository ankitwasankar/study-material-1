<HTML>

<HEAD>

<TITLE>Chapter 20 -- Choice Menu, Text Area, and Scrolling List Controls

</TITLE>



<META>

</HEAD>

<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000EE" VLINK="#551A8B" ALINK="#CE2910">

<H1><FONT SIZE=6 COLOR=#Ff0000>Chapter&nbsp;20</FONT></H1>

<H1><FONT SIZE=6 COLOR=#Ff0000>Choice Menu, Text Area, and Scrolling

List Controls</FONT></H1>

<HR>

<P>

<CENTER><B><FONT SIZE=5><A NAME="CONTENTS">CONTENTS</A></FONT></B></CENTER>

<UL>

<LI><A HREF="#ChoiceMenus">

Choice Menus</A>

<UL>

<LI><A HREF="#ExampleCreatingaChoiceMenu">

Example: Creating a Choice Menu</A>

<LI><A HREF="#ChoiceMenuMethods">

Choice Menu Methods</A>

<LI><A HREF="#ExampleRespondingtoMenuEventsinanApplet">

Example: Responding to Menu Events in an Applet</A>

</UL>

<LI><A HREF="#ScrollingLists">

Scrolling Lists</A>

<UL>

<LI><A HREF="#ExampleCreatingaSingleSelectionList">

Example: Creating a Single-Selection List</A>

<LI><A HREF="#ExampleCreatingaMultipleSelectionList">

Example: Creating a Multiple-Selection List</A>

<LI><A HREF="#ExampleCreatingaScrollingList">

Example: Creating a Scrolling List</A>

<LI><A HREF="#MethodsoftheIListIClass">

Methods of the <I>List</I> Class</A>

<LI><A HREF="#ExampleUsingaScrollingListinanApplet">

Example: Using a Scrolling List in an Applet</A>

</UL>

<LI><A HREF="#TheITextAreaIControl">

The <I>TextArea</I> Control</A>

<UL>

<LI><A HREF="#ExampleCreatingaITextAreaIControl">

Example: Creating a <I>TextArea</I> Control</A>

<LI><A HREF="#MethodsoftheITextAreaIClass">

Methods of the <I>TextArea</I> Class</A>

</UL>

<LI><A HREF="#Summary">

Summary</A>

<LI><A HREF="#ReviewQuestions">

Review Questions</A>

<LI><A HREF="#ReviewExercises">

Review Exercises</A>

</UL>



<HR>

<P>

If your applet must handle only a couple of user commands, it's

an easy matter to include button controls or checkbox groups in

order to enable the user to select those commands. However, often,

an applet's command set is sophisticated enough to warrant complete

menus. Java features choice menus for just this eventuality. Java

also features a scrolling list control, not unlike Windows' list

box control, that enables the user to select items from a list.

Finally, the text area control enables you to display paragraphs

of text within your applet. You'll learn about all these controls

in this chapter.

<H2><A NAME="ChoiceMenus"><FONT SIZE=5 COLOR=#Ff0000>

Choice Menus</FONT></A></H2>

<P>

Choice menus are very similar to the drop-down lists. When the

user selects the menu, a list of commands appears from which the

user can choose. After the user makes a choice, the menu disappears.

<P>

To create a choice menu, you must first create an instance of

the <TT>Choice</TT> class, like this:

<BLOCKQUOTE>

<PRE>

Choice menu = new Choice();

</PRE>

</BLOCKQUOTE>

<P>

As you can see, the <TT>Choice</TT> class's constructor accepts

no arguments.

<P>

After you have created the <TT>Choice</TT> object, you can add

items to the menu by calling the object's <TT>addItem()</TT> method:

<BLOCKQUOTE>

<PRE>

menu.addItem(str);

</PRE>

</BLOCKQUOTE>

<P>

Here, <TT>str</TT> is the text that will appear as the command

in the menu. You can call <TT>addItem()</TT> as often as you need

to build a complete menu. When you have the complete menu created,

you add it to the applet by calling the <TT>add()</TT> method.

<H3><A NAME="ExampleCreatingaChoiceMenu">

Example: Creating a Choice Menu</A></H3>

<P>

Creating a menu is a fairly straightforward process. For example,

to create a choice menu that enables the user to select between

three font styles, you might use the code shown in Listing 20.1.

<HR>

<BLOCKQUOTE>

<B>Listing 20.1&nbsp;&nbsp;LST20_1.TXT: Creating a Choice Menu.

<BR>

</B>

</BLOCKQUOTE>

<BLOCKQUOTE>

<PRE>

Choice menu = new Choice();

menu.addItem(&quot;Plain&quot;);

menu.addItem(&quot;Bold&quot;);

menu.addItem(&quot;Italic&quot;);

add(menu);

</PRE>

</BLOCKQUOTE>

<HR>

<P>

When the user runs the applet containing this menu, a menu like

that shown in Figure 20.1 appears. To display the menu, the user

clicks on the arrow to the right of the text box displaying the

current choice, and the menu appears, as shown in Figure 20.2.

To select a choice, the user merely clicks an entry in the menu.

<P>

<IMG SRC="f20-1.gif"><B> Figure 20.1 : </B><I>Java displays a choice menu as a text box with an arrow.



</I></A><P>

<P>

<IMG SRC="f20-2.gif"><B> Figure 20.2 : </B><I>Clicking the arrow displays the menu.



</I></A><P>

<H3><A NAME="ChoiceMenuMethods">

Choice Menu Methods</A></H3>

<P>

As you've no doubt guessed, the <TT>Choice</TT> class features

a number of public methods that enable you to manipulate choice

menus in various ways. Using these methods, you can do everything

from determining the number of command entries in a  menu to adding

items to the menu. Table 20.1 lists the most commonly used methods

and their descriptions.<BR>

<P>

<CENTER><B>Table 20.1&nbsp;&nbsp;Methods of the </B><I>Choice</I><B>

Class.</B></CENTER>

<P>

<CENTER>

<TABLE BORDER=1 WIDTH=80%>

<TR VALIGN=TOP><TD WIDTH=262><I><B>Method</B></I></TD><TD WIDTH=328><I><B>Description</B></I>

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=262><TT>int countItems()</TT></TD><TD WIDTH=328>Returns the number of command items in the menu.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=262><TT>String getItem(int index)</TT></TD><TD WIDTH=328>Returns the command text for a given item.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=262><TT>void addItem(String item)</TT></TD><TD WIDTH=328>Adds an item to the menu.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=262><TT>String getSelectedItem()</TT></TD><TD WIDTH=328>Returns a string representing the selected item.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=262><TT>int getSelectedIndex()</TT></TD><TD WIDTH=328>Returns the index of the selected item.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=262><TT>void select(int index)</TT></TD><TD WIDTH=328>Selects the item at the given position.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=262><TT>void select(String str)</TT></TD><TD WIDTH=328>Selects the item with the given text string.

</TD></TR>

</TABLE>

</CENTER>

<P>

<H3><A NAME="ExampleRespondingtoMenuEventsinanApplet">

Example: Responding to Menu Events in an Applet</A></H3>

<P>

A menu isn't much good unless you can determine which item the

user selected so that the applet can carry out the user's command.

As with most controls, when the user makes a selection from a

choice menu, Java generates an event that you can capture in the

<TT>action()</TT> method. In the case of a choice menu, <TT>action()</TT>'s

first parameter is the menu instance, and the second parameter

is the text of the selected menu item. By comparing the text to

the items you added to the menu, you can determine which menu

item the user chose.

<P>

The ChoiceApplet applet, whose source code is shown in Listing

20.2, demonstrates creating and responding to choice menus in

an applet. Listing 20.3 is the applet's HTML document. When you

run the applet under Appletviewer, you see the window shown in

Figure 20.3. The text in the window is displayed using the currently

selected color in the choice menu. To change the text color, just

select a new menu item.

<P>

<IMG SRC="f20-3.gif"><B> Figure 20.3 : </B><I>ChoiceApplet displays text in the color selected from its choice menu.



</I></A><P>

<HR>

<BLOCKQUOTE>

<B>Listing 20.2&nbsp;&nbsp;ChoiceApplet.java: Using Menus in an

Applet.<BR>

</B>

</BLOCKQUOTE>

<BLOCKQUOTE>

<PRE>

import java.awt.*;

import java.applet.*;



public class ChoiceApplet extends Applet

{

    Choice menu;

    Color color;



    public void init()

    {

        Choice menu = new Choice();



        menu.addItem(&quot;Black&quot;);

        menu.addItem(&quot;Red&quot;);

        menu.addItem(&quot;Green&quot;);

        menu.addItem(&quot;Blue&quot;);



        add(menu);



        color = Color.black;

    }



    public void paint(Graphics g)

    {

        Font font = new Font(&quot;TimesRoman&quot;, Font.BOLD, 24);

        int height = font.getSize();

        g.setFont(font);



        g.setColor(color);



        g.drawString(&quot;This text is drawn in&quot;, 32, 75);

        g.drawString(&quot;the color selected from&quot;, 32, 75+height);

        g.drawString(&quot;the above choice menu.&quot;, 32, 75+2*height);

    }



    public boolean action(Event evt, Object arg)

    {

        if (evt.target instanceof Choice)

            HandleMenu(arg);



        return true;

    }



    protected void HandleMenu(Object item)

    {

        if (item == &quot;Black&quot;)

            color = Color.black;

        else if (item == &quot;Red&quot;)

            color = Color.red;

        else if (item == &quot;Green&quot;)

            color = Color.green;

        else

            color = Color.blue;



        repaint();

    }

}

</PRE>

</BLOCKQUOTE>

<HR>

<P>

<IMG ALIGN=RIGHT SRC="pseudo.gif" HEIGHT=94 WIDTH=94 BORDER=1>

<BLOCKQUOTE>

Tell Java that the applet uses the classes in the <TT>awt</TT>

package.<BR>

Tell Java that the applet uses the classes in the <TT>applet</TT>

package.<BR>

Derive the <TT>ChoiceApplet</TT> class from Java's <TT>Applet</TT>

class.<BR>

    Declare menu and color objects.<BR>

    Override the <TT>init()</TT> method.<BR>

        Create the menu object.<BR>

        Add commands to the menu object.<BR>

        Add the menu to the applet.<BR>

        Initialize the starting color for the text.<BR>

    Override the <TT>paint()</TT> method.<BR>

        Create and set the display font.<BR>

        Set the selected color.<BR>

        Display text in the selected color.<BR>

    Override the <TT>action()</TT> method.<BR>

        If the menu caused the event, call the <TT>HandleMenu()</TT>

method.<BR>

        Tell Java that the event was handled okay.<BR>

    Declare the <TT>HandleMenu()</TT> method.<BR>

        Set the color field based on the menu selection.<BR>

        Tell Java to repaint the applet's display area.

</BLOCKQUOTE>

<HR>

<BLOCKQUOTE>

<B>Listing 20.3&nbsp;&nbsp;CHOICEAPPLET.htmlL: ChoiceApplet's HTML

Document.<BR>

</B>

</BLOCKQUOTE>

<BLOCKQUOTE>

<PRE>

&lt;title&gt;Applet Test Page&lt;/title&gt;

&lt;h1&gt;Applet Test Page&lt;/h1&gt;

&lt;applet

    code=&quot;ChoiceApplet.class&quot;

    width=300

    height=150

    name=&quot;ChoiceApplet&quot;&gt;

&lt;/applet&gt;

</PRE>

</BLOCKQUOTE>

<HR>

<H2><A NAME="ScrollingLists"><FONT SIZE=5 COLOR=#Ff0000>

Scrolling Lists</FONT></A></H2>

<P>

Whereas choice menus usually display a set of commands or options,

scrolling lists are best used to display a list of items from

which the user can choose. For example, you might use a scrolling

list to enable the user to choose a state when filling out an

address form. The scrolling list in this case would contain all

50 states. The user would only need to double-click on his or

her state in order to complete that section of the form. Scrolling

lists not only make it easy for users to enter information, but

also ensure that the user makes a choice from a valid set of responses.

<P>

To create a scrolling list, you first call the <TT>List</TT> class's

constructor, like this:

<BLOCKQUOTE>

<PRE>

List list = new List(num, false);

</PRE>

</BLOCKQUOTE>

<P>

The constructor's two arguments are the number of visible lines

in the list and a boolean value indicating whether the list will

support multiple selections. The list created in the preceding

will not allow the user to select more than one item simultaneously.

<P>

When you have the list object created, you can add items to the

list. You do this by calling the <TT>List</TT> object's <TT>addItem()</TT>

method:

<BLOCKQUOTE>

<PRE>

list.addItem(str);

</PRE>

</BLOCKQUOTE>

<P>

Here, <TT>str</TT> is the text string for the item to add to the

list.

<P>

<CENTER>

<TABLE BORDER=1 WIDTH=80%>

<TR VALIGN=TOP><TD><B>NOTE</B></TD></TR>

<TR VALIGN=TOP><TD>

<BLOCKQUOTE>

You can add as many items as you like to a list. You are not limited to the number of items given as the <TT>List</TT> constructor's first argument. That value specifies only the size of the list box; that is, the value determines how many items are 
visible on the screen at one time.

</BLOCKQUOTE>



</TD></TR>

</TABLE>

</CENTER>

<P>

<H3><A NAME="ExampleCreatingaSingleSelectionList">

Example: Creating a Single-Selection List</A></H3>

<P>

Suppose that you need to create a list that contains musical artists

from which the user must select only one. First, you create the

list object, after which you add the names of the artists you

want to include. Finally, you add the list to the applet. Listing

20.4 shows the Java code that performs these tasks. Figure 20.4

shows the resultant list box.

<P>

<IMG SRC="f20-4.gif"><B> Figure 20.4 : </B><I>In this list, only one item can be selected at a time.



</I></A><P>

<HR>

<BLOCKQUOTE>

<B>Listing 20.4&nbsp;&nbsp;LST20_4.TXT: Creating a Single-Selection

List Box.<BR>

</B>

</BLOCKQUOTE>

<BLOCKQUOTE>

<PRE>

List list = new List(10, false);

list.addItem(&quot;Pearl Jam&quot;);

list.addItem(&quot;Dream Theater&quot;);

list.addItem(&quot;Joe Satriani&quot;);

list.addItem(&quot;Oasis&quot;);

list.addItem(&quot;Alanis Morissette&quot;);

list.addItem(&quot;Soul Asylum&quot;);

list.addItem(&quot;The Rembrandts&quot;);

list.addItem(&quot;Smashing Pumpkins&quot;);

list.addItem(&quot;Joan Osborne&quot;);

list.addItem(&quot;Bjork&quot;);

add(list);

</PRE>

</BLOCKQUOTE>

<HR>

<P>

Because the <TT>List</TT> constructor's first argument is <TT>10</TT>

and there are only 10 items in the list, all of the items are

visible on the screen. Moreover, because the <TT>List</TT> constructor's

second parameter is <TT>false</TT>, in the list created by Listing

20.4, the user can select only a single artist at a time.

<H3><A NAME="ExampleCreatingaMultipleSelectionList">

Example: Creating a Multiple-Selection List</A></H3>

<P>

When you display a list of musical artists such as that created

by Listing 20.4, you may want the user to select more than one.

In this case, you can create a multiple-selection list, just by

changing the <TT>List</TT> constructor's second argument to <TT>true</TT>,

like this:

<BLOCKQUOTE>

<PRE>

List list = new List(10, true);

</PRE>

</BLOCKQUOTE>

<P>

As Figure 20.5 shows, the new list enables the user to select

as many artists as he or she likes.

<P>

<IMG SRC="f20-5.gif"><B> Figure 20.5 : </B><I>Now the user can select more than one artist at a time.



</I></A><P>

<H3><A NAME="ExampleCreatingaScrollingList">

Example: Creating a Scrolling List</A></H3>

<P>

You may have noticed that in this chapter's title, the list controls

are called &quot;scrolling lists.&quot; So far, though, none of

your lists have scrolled. In fact, they haven't even had scroll

bars. Whenever the size of the list box (given as the constructor's

first argument) is greater than or equal to the number of items

in the list, the list doesn't need to scroll, so no scroll bar

appears. However, as soon as the number of items exceeds the size

of the list box, Java enables scrolling.

<P>

As an example, suppose that you were to change the first line

of Listing 20.4 to this:

<BLOCKQUOTE>

<PRE>

List list = new List(5, false);

</PRE>

</BLOCKQUOTE>

<P>

Now, you have a list that can display five items at a time. However,

there are 10 items in your list, which means that, in order for

the user to be able to see all then items, the list must scroll.

Figure 20.6 shows the resultant scrolling list.

<P>

<IMG SRC="f20-6.gif"><B> Figure 20.6 : </B><I>The user must scroll this list to see all the items.



</I></A><P>

<H3><A NAME="MethodsoftheIListIClass">

Methods of the <I>List</I> Class</A></H3>

<P>

Because there's so much you can do with a scrolling list control,

the <TT>List</TT> class has a large set of public methods that

you can call to manipulate a list. The most useful of these methods

are listed in Table 20.2. Although there are a lot of methods

to learn in the table, the most important are <TT>addItem()</TT>,

<TT>getSelectedIndex()</TT>, <TT>getSelectedIndexes()</TT>, <TT>getSelectedItem()</TT>,

and <TT>getSelectedItems()</TT>. Using these five methods, you

can create a basic scrolling list and enable the user to make

selections from it. In the next section, in fact, you'll see how

to determine which item the user selected.<BR>

<P>

<CENTER><B>Table 20.2&nbsp;&nbsp;Most Useful Methods of the </B><I>List</I><B>

Class.</B></CENTER>

<P>

<CENTER>

<TABLE BORDER=1 WIDTH=80%>

<TR VALIGN=TOP><TD WIDTH=295><I><B>Method</B></I></TD><TD WIDTH=295><I><B>Description</B></I>

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>void addItem(String item)</TT></TD><TD WIDTH=295>Adds an item to the end of the list.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>void addItem(String item, int index) </TT>

</TD><TD WIDTH=295>Adds an item to a specific position in the list.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>boolean allowsMultipleSelections()</TT>

</TD><TD WIDTH=295>Returns a <TT>boolean</TT> value indicating whether the list supports multiple selection.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>void clear()</TT></TD><TD WIDTH=295>Clears all items from the list.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>int countItems()</TT></TD><TD WIDTH=295>Returns the number of items in the list.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>void delItem(int position)</TT></TD><TD WIDTH=295>Deletes the item at the given position from the list.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>void delItems(int start, int end)</TT></TD>

<TD WIDTH=295>Deletes a group of items from the list.</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>void deselect(int index)</TT></TD><TD WIDTH=295>Deselects the item at the given index.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>String getItem(int index)</TT></TD><TD WIDTH=295>Returns the item at the given index.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>int getRows()</TT></TD><TD WIDTH=295>Returns the size of the list box.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>int getSelectedIndex()</TT></TD><TD WIDTH=295>Gets the index of the selected item.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>int[] getSelectedIndexes()</TT> </TD><TD WIDTH=295>Gets the indexes of a multiple selection.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>String getSelectedItem()</TT></TD><TD WIDTH=295>Returns the selected item in a list.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>String[] getSelectedItems()</TT></TD><TD WIDTH=295>Returns all the items in a multiple selection.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>int getVisibleIndex()</TT></TD><TD WIDTH=295>Returns the index of the last item that was made visible.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>boolean isSelected(int index)</TT></TD>

<TD WIDTH=295>Returns a <TT>boolean</TT> value indicating whether the item at the given index is selected.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>void makeVisible(int index)</TT></TD><TD WIDTH=295>Ensures that the item at the given index is visible.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>void replaceItem(String</TT></TD><TD WIDTH=295>Replaces the item at the given <TT>newValue, int index)</TT>index with a new item.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>void select(int index)</TT></TD><TD WIDTH=295>Selects the item at the given index.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=295><TT>void setMultipleSelections(boolean v)</TT>

</TD><TD WIDTH=295>Toggles the multiple-selection mode.</TD></TR>

</TABLE>

</CENTER>

<P>

<H3><A NAME="ExampleUsingaScrollingListinanApplet">

Example: Using a Scrolling List in an Applet</A></H3>

<P>

By now, you've gotten used to working with the list of musical

artists that I've used in the previous few examples. In this example,

you put that list to the test by not only creating and displaying

the list in an applet, but also by displaying the user's selection.

Listing 20.5 is the source code for the ListApplet applet.

<HR>

<BLOCKQUOTE>

<B>Listing 20.5&nbsp;&nbsp;ListApplet.java: An Applet with a Scrolling

List.<BR>

</B>

</BLOCKQUOTE>

<BLOCKQUOTE>

<PRE>

import java.awt.*;

import java.applet.*;



public class ListApplet extends Applet

{

    List list;



    public void init()

    {

        list = new List(5, false);



        list.addItem(&quot;Pearl Jam&quot;);

        list.addItem(&quot;Dream Theater&quot;);

        list.addItem(&quot;Joe Satriani&quot;);

        list.addItem(&quot;Oasis&quot;);

        list.addItem(&quot;Alanis Morissette&quot;);

        list.addItem(&quot;Soul Asylum&quot;);

        list.addItem(&quot;The Rembrandts&quot;);

        list.addItem(&quot;Smashing Pumpkins&quot;);

        list.addItem(&quot;Joan Osborne&quot;);

        list.addItem(&quot;Bjork&quot;);



        add(list);

        resize(300, 150);

    }



    public void paint(Graphics g)

    {

        g.drawString(&quot;CHOSEN ITEM:&quot;, 100, 110);

        String s = list.getSelectedItem();



        if (s == null)

            s = &quot;None&quot;;



        g.drawString(s, 100, 130);

    }



    public boolean action(Event evt, Object arg)

    {

        repaint();

        return true;

    }

}

</PRE>

</BLOCKQUOTE>

<HR>

<P>

<IMG ALIGN=RIGHT SRC="pseudo.gif" HEIGHT=94 WIDTH=94 BORDER=1>

<BLOCKQUOTE>

Tell Java that the applet uses the classes in the <TT>awt</TT>

package.<BR>

Tell Java that the applet uses the classes in the <TT>applet</TT>

package.<BR>

Derive the <TT>ListApplet</TT> class from Java's <TT>Applet</TT>

class.<BR>

    Declare the list object.<BR>

    Override the <TT>init()</TT> method.<BR>

        Create the list object.<BR>

        Add items to the list object.<BR>

        Add the list to the applet.<BR>

        Set the applet's size.<BR>

    Override the <TT>paint()</TT> method.<BR>

        Draw a label in the applet's display.<BR>

        Get the selected item from the list box.<BR>

        If there is no item selected, set the string to &quot;None.&quot;

<BR>

        Display the selected item.<BR>

    Override the <TT>action()</TT> method.<BR>

        Force the applet to repaint its display.<BR>

        Tell Java that the event was handled okay.

</BLOCKQUOTE>

<P>

When you run ListApplet with Appletviewer, you see the window

shown in Figure 20.7. When you double-click an item in the list,

Java calls the applet's <TT>action()</TT> method in which the

applet calls the <TT>repaint()</TT> method. This forces Java to

call the <TT>paint()</TT> method, where the applet retrieves the

selected item and displays it.

<P>

<IMG SRC="f20-7.gif"><B> Figure 20.7 : </B><I>The scrolling list in this applet lets you choose a single musical artist.



</I></A><P>

<P>

Notice the call to <TT>resize()</TT> in the <TT>init()</TT> method.

The <TT>resize()</TT> method enables you to set the applet to

any size you wish. This size overrides any size setting that's

included in the HTML document that ran the applet.

<H2><A NAME="TheITextAreaIControl"><FONT SIZE=5 COLOR=#Ff0000>

The <I>TextArea</I> Control</FONT></A></H2>

<P>

Throughout this book, you've been using the <TT>TextField</TT>

control to retrieve information from the user. In most cases,

the <TT>TextField</TT> control works great, but it does have some

limitations, the most serious being the fact that it can display

only one line of text at a time. There may be situations where

you'd like to display one or more paragraphs of text in your applet,

in a control that enables the user to edit existing text, as well

as enter his or her own text. This is where the <TT>TextArea</TT>

control is useful. The <TT>TextArea</TT> control is a text box

that acts like a simple word processor. When you display a text

box, the user can type and edit multiple lines of text.

<P>

To create a <TT>TextArea</TT> control, you call the class's constructor,

like this:

<BLOCKQUOTE>

<PRE>

TextArea textArea = new TextArea(str, rows, cols);

</PRE>

</BLOCKQUOTE>

<P>

This constructor's three arguments are the string to display in

the control, the number of rows in the control, and the number

of columns. As with the other controls, after you create the <TT>TextField</TT>

object, you add it to the applet by using the <TT>add()</TT> method.

<H3><A NAME="ExampleCreatingaITextAreaIControl">

Example: Creating a <I>TextArea</I> Control</A></H3>

<P>

As an example, suppose that you need to create a <TT>TextArea</TT>

control that'll start off displaying eight lines of text. Listing

20.6 is an applet, called TextAreaApplet, that creates a <TT>TextArea</TT>

control that displays eight lines of text. Figure 20.8 shows what

the applet looks like running under Appletviewer. When you run

the applet, click on the <TT>TextArea</TT> control's box and try

editing the text in the window. As you'll discover, you not only

can edit the existing text, but also add new text.

<P>

<IMG SRC="f20-8.gif"><B> Figure 20.8 : </B><I>TextAreaApplet applet run-<r>ning under Appletviewer.



</I></A><P>

<HR>

<BLOCKQUOTE>

<B>Listing 20.6&nbsp;&nbsp;TEXTAREAAPPLET.JAVA: The TextAreaApplet

Applet.<BR>

</B>

</BLOCKQUOTE>

<BLOCKQUOTE>

<PRE>

import java.awt.*;

import java.applet.*;



public class TextAreaApplet extends Applet

{

    TextArea textArea;



    public void init()

    {

        String s = &quot;This is an example of a\n&quot;;

        s += &quot;textarea control, which is not\n&quot;;

        s += &quot;unlike a textfield control.\n&quot;;

        s += &quot;The big difference is that a\n&quot;;

        s += &quot;textarea control can hold many\n&quot;;

        s += &quot;lines of text, whereas a\n&quot;;

        s += &quot;textfield control deals with\n&quot;;

        s += &quot;only one line of text at a time.\n&quot;;



        textArea = new TextArea(s, 9, 30);

        add(textArea);



        resize(300, 180);

    }

}

</PRE>

</BLOCKQUOTE>

<HR>

<P>

<IMG ALIGN=RIGHT SRC="pseudo.gif" HEIGHT=94 WIDTH=94 BORDER=1>

<BLOCKQUOTE>

Tell Java that the applet uses the classes in the <TT>awt</TT>

package.<BR>

Tell Java that the applet uses the classes in the <TT>applet</TT>

package.<BR>

Derive the <TT>TextAreaApplet</TT> class from Java's <TT>Applet</TT>

class.<BR>

    Declare the <TT>TextArea</TT> object.<BR>

    Override the <TT>init()</TT> method.<BR>

        Create the string to display in the control.<BR>

        Create the <TT>TextArea</TT> object.<BR>

        Add the control to the applet.<BR>

        Set the applet's size.<BR>

</BLOCKQUOTE>

<P>

<CENTER>

<TABLE BORDER=1 WIDTH=80%>

<TR VALIGN=TOP><TD><B>TIP</B></TD></TR>

<TR VALIGN=TOP><TD>

<BLOCKQUOTE>

If you look at how the <TT>TextArea</TT> control's display string is created in TextAreaApplet, you'll see that you can store multiple lines of text into a single <TT>String</TT> object. You do this by placing the newline character (<TT>\n</TT>) at the 
end of each line that you add to the string.

</BLOCKQUOTE>



</TD></TR>

</TABLE>

</CENTER>

<P>

<P>

When you run TextAreaApplet, notice how all the text fits within

the text box. Because the text is fully displayed, the control's

scroll bars are inactive. However, if you were to edit the text

such that you added more lines than the control can display, or

made a line longer that the control can display, the control's

scroll bars become active. Figure 20.9 shows TextAreaApplet after

the user has added text that forces the scroll bars to become

active. You can use the scroll bars to view the portions of the

text that are offscreen.

<P>

<IMG SRC="f20-9.gif"><B> Figure 20.9 : </B><I>When the text contained in the control cannot be fully displayed, a TextArea control activates its scroll bars.



</I></A><P>

<H3><A NAME="MethodsoftheITextAreaIClass">

Methods of the <I>TextArea</I> Class</A></H3>

<P>

To enable you to easily manipulate the text, the <TT>TextArea</TT>

class features a number of public methods. You can use these methods

to modify the text in the control or to obtain information about

the control. Table 20.3 shows the most useful methods and what

they do.<BR>

<P>

<CENTER><B>Table 20.3&nbsp;&nbsp;Useful Methods of the </B><I>TextArea</I><B>

Class.</B></CENTER>

<P>

<CENTER>

<TABLE BORDER=1 WIDTH=80%>

<TR VALIGN=TOP><TD WIDTH=293><I><B>Method</B></I></TD><TD WIDTH=298><I><B>Description</B></I>

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=293><TT>void appendText(String str)</TT></TD><TD WIDTH=298>Appends text to the control.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=293><TT>int getColumns()</TT></TD><TD WIDTH=298>Returns the number of columns in the control.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=293><TT>int getRows()</TT></TD><TD WIDTH=298>Returns the number of rows in the `control.

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=293><TT>void insertText(String str,</TT></TD><TD WIDTH=298>Inserts text at the given position.<TT>int pos)</TT>

</TD></TR>

<TR VALIGN=TOP><TD WIDTH=293><TT>void replaceText(String str,</TT></TD><TD WIDTH=298>Replaces text specified by the <TT>int start, int end)</TT>starting and ending points.

</TD></TR>

</TABLE>

</CENTER>

<P>

<H2><A NAME="Summary"><FONT SIZE=5 COLOR=#Ff0000>

Summary</FONT></A></H2>

<P>

Choice menus are a powerful control that enable you to include

a pop-up menu of commands for the user of your applet. By using

such a menu, the user can more easily control the applet, as well

as set options, without the controls' taking up a lot of screen

space. Scrolling lists are a valuable tool for ensuring that the

user always enters a response from a valid set of responses. You

can even set up a list to accept multiple selections. Finally,

the <TT>TextArea</TT> control provides a simple text editor that

you can easily add to your applets.

<H2><A NAME="ReviewQuestions"><FONT SIZE=5 COLOR=#Ff0000>

Review Questions</FONT></A></H2>

<OL>

<LI>How many arguments are accepted by the <TT>Choice</TT> class's

constructor?

<LI>How do you add items to a choice menu?

<LI>What are the two arguments needed by the <TT>List</TT> class's

constructor?

<LI>How do you add items to a scrolling list?

<LI>When would you use a <TT>TextArea</TT> control in place of

a <TT>TextField</TT> control?

<LI>How can you determine which menu command the user selected?

<LI>How do you create a multiple-selection scrolling list?

<LI>How do you retrieve the selected item from a single-selection

scrolling list?

<LI>How do you create a single string containing multiple lines

of text?

<LI>How do you retrieve multiple selections from a scrolling list?

<LI>Can you delete items from a scrolling list?

</OL>

<H2><A NAME="ReviewExercises"><FONT SIZE=5 COLOR=#Ff0000>

Review Exercises</FONT></A></H2>

<OL>

<LI>Write an applet that has a menu containing the commands <TT>On</TT>

and <TT>Off</TT>.

<LI>Write an applet that displays a single-selection scrolling

list containing the titles of five movies.

<LI>Write an applet that displays a <TT>TextArea</TT> control.

The control should display five lines of text at startup.

<LI>Write an applet that changes the size of the applet based

on five selections in a choice menu.

<LI>Revise the applet from exercise 3 such that the user uses

a single-selection list to select the applet's size.

<LI>Write an applet called TextTransferApplet that includes a

list box and a <TT>TextArea</TT> control. The list box should

contain 10 words. When the user clicks a word, the word should

appear in the <TT>TextArea</TT> control on a new line. Figure

20.10 shows what the completed applet should look like, and Figure

20.11 shows the applet after the user has transferred several

words to the <TT>TextArea</TT> control. You can find the solution

for this problem in the CHAP20 folder of this book's CD-ROM.

</OL>

<BR>

<IMG SRC="f20-10.gif"><B> Figure 20.10 : </B><I>TextTransferApplet should look like this.



</I></A><P>



<P>

<IMG SRC="f20-11.gif"><B> Figure 20.11 : </B><I>Here's the applet after the user has transferred a few words to the text area.



</I></A><P>

<HR>



<CENTER><P><A HREF="ch19.html"><IMG SRC="pc.gif" BORDER=0 HEIGHT=88 WIDTH=140></A>

<A HREF="#CONTENTS"><IMG SRC="cc.gif" BORDER=0 HEIGHT=88 WIDTH=140></A>

<A HREF="index.html"><IMG SRC="hb.gif" BORDER=0 HEIGHT=88 WIDTH=140></A>

<A HREF="ch21.html"><IMG SRC="nc.gif" BORDER=0 HEIGHT=88 WIDTH=140></A>

<HR WIDTH="100%"></P></CENTER>

</BODY>

</HTML>