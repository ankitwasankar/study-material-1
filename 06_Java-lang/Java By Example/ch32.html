<HTML>

<HEAD>

<TITLE>Chapter 32 -- Writing Java Applications</TITLE>



<META>

</HEAD>

<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000EE" VLINK="#551A8B" ALINK="#CE2910">

<H1><FONT SIZE=6 COLOR=#Ff0000>Chapter&nbsp;32</FONT></H1>

<H1><FONT SIZE=6 COLOR=#Ff0000>Writing Java Applications</FONT>

</H1>

<HR>

<P>

<CENTER><B><FONT SIZE=5><A NAME="CONTENTS">CONTENTS</A></FONT></B></CENTER>

<UL>

<LI><A HREF="#AboutJavaApplications">

About Java Applications</A>

<LI><A HREF="#TheSimplestJavaApplication">

The Simplest Java Application</A>

<UL>

<LI><A HREF="#ExampleBuildinganApplication">

Example: Building an Application</A>

<LI><A HREF="#ExampleGettinganApplicationsArguments">

Example: Getting an Application's Arguments</A>

</UL>

<LI><A HREF="#WindowedApplications">

Windowed Applications</A>

<UL>

<LI><A HREF="#ExampleChanginganApplettoanApplication">

Example: Changing an Applet to an Application</A>

<LI><A HREF="#UnderstandingtheFaceAppApplication">

Understanding the FaceApp Application</A>

</UL>

<LI><A HREF="#Summary">

Summary</A>

<LI><A HREF="#ReviewQuestions">

Review Questions</A>

<LI><A HREF="#ReviewExercises">

Review Exercises</A>

</UL>



<HR>

<P>

The bulk of this book is dedicated to using Java to create applets

for the Internet. However, Java is a full-fledged computer language

that enables you to write complete, stand-alone applications.

Although most Java users are interested in creating only applets

(there are other, more powerful languages for creating applications),

no introductory Java book would be complete without at least dabbling

a little with Java applications. In this chapter, then, you learn

the basics of creating standalone applications with Java.

<H2><A NAME="AboutJavaApplications"><FONT SIZE=5 COLOR=#Ff0000>

About Java Applications</FONT></A></H2>

<P>

If you've run the HotJava browser, you've already had experience

with Java applications. The HotJava browser was programmed entirely

in Java and, although the browser is way out of date at the time

of this writing, it demonstrates how much you can do with Java,

even when dealing with sophisticated telecommunications applications.

<P>

Much of what you've learned about applets can be applied toward

writing applications. After all, the language doesn't change,

just the way you use it does. Of course, conversely, some of what

you learned about applets doesn't apply to the writing of applications.

For example, because Java applications aren't run &quot;on the

Web,&quot; they don't have to deal with all the security issues

that come up when running applets. A Java application can access

any files it needs to access, for example.

<P>

If you've ever programmed in C or C++, you'll discover that writing

applications in Java is similar. If you haven't programmed in

those languages, rest assured that, by this point in the book,

you already have 95% of the knowledge you need in order to write

standalone Java applications.

<H2><A NAME="TheSimplestJavaApplication"><FONT SIZE=5 COLOR=#Ff0000>

The Simplest Java Application</FONT></A></H2>

<P>

You can create a runnable Java application in only a few lines

of code. In fact, an application requires only one method called

<TT>main()</TT>.C and C++ programmers will recognize <TT>main()</TT>

as being the place where applications begin their execution. The

same is true for Java applications. Listing 32.1 shows the simplest

Java application.

<HR>

<BLOCKQUOTE>

<B>Listing 32.1&nbsp;&nbsp;SimpleApp.java: The Simplest Java Application.

<BR>

</B>

</BLOCKQUOTE>

<BLOCKQUOTE>

<PRE>

class SimpleApp

{

    public static void main(String args[])

    {

        System.out.println(&quot;My first Java app!&quot;);

    }

}

</PRE>

</BLOCKQUOTE>

<HR>

<P>

<IMG ALIGN=RIGHT SRC="pseudo.gif" HEIGHT=94 WIDTH=94 BORDER=1>

<BLOCKQUOTE>

Declare the <TT>SimpleApp</TT> class.<BR>

    Declare the app's <TT>main()</TT> method.<BR>

        Print a line of text on the screen.

</BLOCKQUOTE>

<P>

If you look a the first line of Listing 32.1, you'll see that

even a Java standalone application starts off as a class. In this

case, the class has no superclass-that is, the <TT>SimpleApp</TT>

class is not derived from another class (although it could have

been). The first line of the body of the class begins the <TT>main()</TT>

method, which is where all Java applications begin execution.

This method's single parameter is a <TT>String</TT> array containing

the command line sent to the application when it was started.

<P>

Finally, the single line in <TT>main()</TT> prints a message on

your computer's screen. Because this is not a Windows application,

the class contains no <TT>paint()</TT> method. Instead, you display

text by using the <TT>println()</TT> method of the <TT>System.out</TT>

package.

<P>

To run the Java application, you must first compile it and then

run the byte-code file using Java's interpreter. You compile the

program exactly as you would an applet, using javac. The following

example describes the entire process.

<H3><A NAME="ExampleBuildinganApplication">

Example: Building an Application</A></H3>

<P>

Building a Java application isn't any more difficult that building

an applet, although the steps are slightly different. Follow the

steps below to compile and run the SimpleApp application.

<OL>

<LI>Type Listing 32.1, and save it in your C:\CLASSES folder,

under the file name SimpleApp.java. (If you don't want to type,

you can copy the listing from the CHAP32 folder of this book's

CD-ROM.)

<LI>Select the MS-DOS Prompt command from the Start menu's Program

menu. The DOS window appears on your screen (Figure 32.1).<BR>

<IMG SRC="f32-1.gif"><B> Figure 32.1 : </B><I>You must run SimpleApp from a DOS window.



</I></A><P>

<LI>Type <TT>cd c:\classes</TT> to switch to your CLASSES folder.

<LI>Type <TT>javac SimpleApp.java</TT> to compile the application's

source code. After compilation, you'll have the SimpleApp.class

file in your CLASSES folder.

<LI>Type <TT>java SimpleApp</TT> to run the application. The message

&quot;My first Java app!&quot; appears on the screen (Figure 32.2).

</OL>

<P>

<IMG SRC="f32-2.gif"><B> Figure 32.2 : </B><I>The SimpleApp applications prints a single line of text on the screen.



</I></A><P>

<H3><A NAME="ExampleGettinganApplicationsArguments">

Example: Getting an Application's Arguments</A></H3>

<P>

You know that when you start a DOS program, you can sometimes

append parameters to the command line in order to give the program

information it needs to start. You can do the same thing with

Java applications. For example, here's how you would start SimpleApp

with two parameters:

<BLOCKQUOTE>

<PRE>

java SimpleApp param1 param2

</PRE>

</BLOCKQUOTE>

<P>

Of course, because SimpleApp ignores its parameters, the parameters

in the command line don't mean anything. Suppose, however, you

wanted to print a user-specified message a user-specified number

of times. You might, then, write the Java application shown in

Listing 32.2. When you run this application, add two parameters

to the command line: the message to print (in quotes if the message

is more than one word) and the number of times to print the message.

You'll get output like that shown in Figure 32.3.

<P>

<IMG SRC="f32-3.gif"><B> Figure 32.3 : </B><I>The ArgApp application prints a message the number of times given in the command-line arguments.



</I></A><P>

<HR>

<BLOCKQUOTE>

<B>Listing 32.2&nbsp;&nbsp;ArgApp.java: Using Command-Line Arguments.

<BR>

</B>

</BLOCKQUOTE>

<BLOCKQUOTE>

<PRE>

class ArgApp

{

    String message;

    int count;



    void GetArgs(String args[])

    {

        String s = args[1];

        count = Integer.parseInt(s);

        message = args[0];

    }



    void PrintMessage()

    {

        for (int x=0; x&lt;count; ++x)

            System.out.println(message);

    }



    public static void main(String args[])

    {

        ArgApp app = new ArgApp();

        app.GetArgs(args);

        app.PrintMessage();

    }

}

</PRE>

</BLOCKQUOTE>

<HR>

<P>

<IMG ALIGN=RIGHT SRC="pseudo.gif" HEIGHT=94 WIDTH=94 BORDER=1>

<BLOCKQUOTE>

Declare the <TT>ArgApp</TT> class.<BR>

    Declare the class's data fields.<BR>

    Define the <TT>GetArgs()</TT> method.<BR>

        Extract the number of times to print the message.<BR>

        Convert the count to an integer.<BR>

        Extract the message to print.<BR>

    Define the <TT>PrintMessage()</TT> method.<BR>

        Loop for the requested number of times.<BR>

            Display the message each time through the loop.<BR>

    Define the app's<TT> main()</TT> method.<BR>

        Create an <TT>ArgApp()</TT> object.<BR>

        Call the method to extract the arguments.<BR>

        Call the method to print the message.

</BLOCKQUOTE>

<P>

The ArgApp application not only shows you how to use command-line

parameters, but also how to write a Java application that actually

does something. The important thing to notice here is that you

must first create an object of the ArgApp class before you can

call its methods and access its data fields. This is because a

class is just a template for an object; it doesn't actually become

an object until you create an instance of the class with the <TT>new</TT>

keyword.

<P>

One way to avoid having to create an object of the class is to

declare all the class's data fields and methods as <TT>static</TT>.

Such methods and data fields are accessible in memory, which is

why the SimpleApp application in Listing 31.1 runs. Its <TT>main()</TT>

method is declared as <TT>static</TT>. Of course, it's a heck

of a lot easier to just go ahead and create an object of the class

than it is to go through the source code and add <TT>static</TT>

to everything.

<H2><A NAME="WindowedApplications"><FONT SIZE=5 COLOR=#Ff0000>

Windowed Applications</FONT></A></H2>

<P>

You're probably thinking that it's pretty much a waste of time

to write Java applications if you have to run them under the DOS

or UNIX text-based operating system. All the action these days

is in windowed applications. Yes, you can write windowed applications

with Java, as the HotJava browser proves. But, if you've written

conventional windowed applications, you're probably a little nervous

about writing similar Java applications. After all, writing such

applications with languages like C and C++ can be a nightmare.

<P>

The truth is, however, you already know almost everything you

need to know to write your own standalone applications for GUI

operating systems. You can take most any applet and convert it

to a standalone application just by adding the <TT>main()</TT>

method to the class. In <TT>main()</TT>, you have to perform some

of the tasks that Java handles for you when running an applet.

These tasks include creating, sizing, and displaying the application's

window. The following example gives you the details.

<H3><A NAME="ExampleChanginganApplettoanApplication">

Example: Changing an Applet to an Application</A></H3>

<P>

As I said in the previous paragraph, you can convert almost any

applet to an application simply by adding a <TT>main()</TT> method

that performs a few housekeeping tasks. Listing 32.3 is an applet

from a previous chapter's exercises. The previous version drew

a face image in the applet's display. The new version displays

the face in its own standalone, frame window. When you run the

application, you see the window shown in Figure 32.4.

<P>

<IMG SRC="f32-4.gif"><B> Figure 32.4 : </B><I>The FaceApp application draws a face in a frame window.



</I></A><P>

<HR>

<BLOCKQUOTE>

<B>Listing 32.3&nbsp;&nbsp;FaceApp.java: Converting an Applet

to an Application.<BR>

</B>

</BLOCKQUOTE>

<BLOCKQUOTE>

<PRE>

import java.awt.*;

import java.applet.*;



public class FaceApp extends Applet

{

    public void init()

    {

        Button button = new Button(&quot;Close&quot;);

        add(button);

    }



    public void paint(Graphics g)

    {

        // Head.

        g.drawOval(40, 40, 120, 150);





        // Eyes.

        g.drawOval(57, 75, 30, 20);

        g.drawOval(110, 75, 30, 20);



        // Pupils.

        g.fillOval(68, 81, 10, 10);

        g.fillOval(121, 81, 10, 10);



        // Nose.

        g.drawOval(85, 100, 30, 30);



        // Mouth.

        g.fillArc(60, 130, 80, 40, 180, 180);



        // Ears.

        g.drawOval(25, 92, 15, 30);

        g.drawOval(160, 92, 15, 30);

    }



    public boolean action(Event evt, Object arg)

    {

        if (arg == &quot;Close&quot;)

            System.exit(0);

 

        return true;

    }



    public static void main(String args[])

    {

        FaceApp app = new FaceApp();

        Frame frame = new Frame(&quot;Face Window&quot;);



        app.init();

        app.start();



        frame.add(&quot;Center&quot;, app);

        frame.resize(210, 300);

        frame.show();

    }

}

</PRE>

</BLOCKQUOTE>

<HR>

<P>

<IMG ALIGN=RIGHT SRC="pseudo.gif" HEIGHT=94 WIDTH=94 BORDER=1>

<BLOCKQUOTE>

Tell Java that the class uses the <TT>awt</TT> package.<BR>

Tell Java that the class uses the <TT>applet</TT> package.<BR>

Declare the <TT>FaceApp</TT> class.<BR>

    Override the <TT>init()</TT> method.<BR>

        Create a button object and add it to the window.<BR>

    Override the <TT>paint() </TT>method.<BR>

        Draw the face image using ovals and arcs.<BR>

    Override the <TT>action()</TT> method.<BR>

        If the user clicks the close button...<BR>

            Shut down the application.<BR>

        Tell Java the message was handled.<BR>

    Define the <TT>main()</TT> method.<BR>

        Create the <TT>FaceApp</TT> object and the frame window.

<BR>

        Call the <TT>init()</TT> and <TT>start()</TT> methods.

<BR>

        Add the &quot;applet&quot; to the window.<BR>

        Size and show the window.

</BLOCKQUOTE>

<H3><A NAME="UnderstandingtheFaceAppApplication">

Understanding the FaceApp Application</A></H3>

<P>

If you examine Listing 32.3, you'll see that most of the FaceApp

application is written exactly like any other applet you've written

throughout this book. The big difference is the addition of the

<TT>main()</TT> method, where this program's execution starts.

Because you're no longer running the program as an applet, you

have to perform some of the start-up tasks that Java automatically

performs for applets. The first step is to create an object of

the class and a frame window to hold the object, like this:

<BLOCKQUOTE>

<PRE>

FaceApp app = new FaceApp();

Frame frame = new Frame(&quot;Face Window&quot;);

</PRE>

</BLOCKQUOTE>

<P>

Next, you have to call the methods that get the object going.

These methods are <TT>init()</TT> and <TT>start()</TT>, which

are usually called by Java:

<BLOCKQUOTE>

<PRE>

app.init();

app.start();

</PRE>

</BLOCKQUOTE>

<P>

Note that, although the FaceApp class doesn't show a <TT>start()</TT>

method, it does inherit it from the <TT>Applet</TT> class. It's

true that even the inherited <TT>start()</TT> method doesn't do

anything, but you might as well be consistent and call it anyway.

That way, you won't forget that some applets do override the <TT>start()</TT>

method, without which they won't run properly.

<P>

Now, you can add the FaceApp object to the frame window, like

this:

<BLOCKQUOTE>

<PRE>

frame.add(&quot;Center&quot;, app);

</PRE>

</BLOCKQUOTE>

<P>

Finally, you must be sure to resize and show the window, like

this:

<BLOCKQUOTE>

<PRE>

frame.resize(210, 300);

frame.show();

</PRE>

</BLOCKQUOTE>

<P>

If you fail to resize the application's window, all you'll see

is the title bar, forcing the user to resize the window by hand.

More importantly, if you fail to call <TT>show()</TT>, the application's

window won't even appear on the screen. That's sure to leave your

application's user feeling abused.

<H2><A NAME="Summary"><FONT SIZE=5 COLOR=#Ff0000>

Summary</FONT></A></H2>

<P>

Although Java is used almost exclusively for creating applets,

it is possible to use Java to create standalone applications.

These applications can be DOS-based (or UNIX, etc.) or be written

for a windowed operating system such as Windows 95. The easiest

way to create a windowed application is to write the program as

if it were an applet and then add a <TT>main()</TT> method that

creates the application object and the frame window that'll contain

that object.

<H2><A NAME="ReviewQuestions"><FONT SIZE=5 COLOR=#Ff0000>

Review Questions</FONT></A></H2>

<OL>

<LI>What method do you find in an application that you don't find

in an applet?

<LI>How do you run a Java standalone application?

<LI>What is the single parameter received by the <TT>main()</TT>

method?

<LI>How can you extract parameters from an application's command

line?

<LI>What do you have to add to an applet to convert it to an application?

<LI>Why do you have to instantiate an object from a class before

you can call its methods?

<LI>What do you have to do to create and display an application's

window?

</OL>

<H2><A NAME="ReviewExercises"><FONT SIZE=5 COLOR=#Ff0000>

Review Exercises</FONT></A></H2>

<OL>

<LI>Write a stand-alone application that accepts two numbers as

parameters and prints out the numbers' sum.

<LI>Choose any applet from this book and convert it to a stand-alone

application.

<LI>Convert the ThreadApplet5 applet from <A HREF="ch31.html" >Chapter 31</A>'s exercises

into a stand-alone application. (You can find the solution for

this exercise in the CHAP32 folder of this book's CD-ROM.)

</OL>

<HR>



<CENTER><P><A HREF="ch31.html"><IMG SRC="pc.gif" BORDER=0 HEIGHT=88 WIDTH=140></A>

<A HREF="#CONTENTS"><IMG SRC="cc.gif" BORDER=0 HEIGHT=88 WIDTH=140></A>

<A HREF="index.html"><IMG SRC="hb.gif" BORDER=0 HEIGHT=88 WIDTH=140></A>

<A HREF="ch33.html"><IMG SRC="nc.gif" BORDER=0 HEIGHT=88 WIDTH=140></A>

<HR WIDTH="100%"></P></CENTER>

</BODY>

</HTML>