<!DOCTYPE html>
<HTML>
	
<!-- Mirrored from www.homeandlearn.co.uk/JS/html5_canvas_keyboard_keys.html by HTTrack Website Copier/3.x [XR&CO'2005], Thu, 24 Jan 2013 07:19:57 GMT -->
<HEAD>
		<TITLE>Keyboard keys and the HTML5 canvas</TITLE>
	<LINK REL=Stylesheet TYPE ="text/css" HREF="two_col_style_1-2.css">
		<meta name="description" content="Javascript tutorials for beginners: How to detect key down events with the HTML5 canvas.">
		<meta itemprop="name" content="Home and Learn">
		<meta itemprop="description" content="Free Javascript Course">
		<meta itemprop="image" content="../logo5.jpg">
		<link rel="publisher" href="https://plus.google.com/104045712242599534737" />
	</HEAD>


	<BODY>
		<HEADER ID="Banner"><P>&nbsp;</P>
			<H1><SPAN class="Logo_Text">Free</SPAN> <SPAN class="Logo_Text2">Javascript</SPAN> <SPAN class="Logo_Text">Courses</SPAN></H1>
		</HEADER>
<HR />

		<NAV ID="left_menu">
		<P>&nbsp;</P>
<P>&nbsp;</P>
		<H3>Computer Courses</H3>
<ul>
<LI><a href="../index-2.html">Home</a></LI>
<LI><a href="../BC/BeginnersComputing.html">Beginners Computing </a></LI>
<LI><a href="../word2007_2010/Word-2007-2010.html">Word 2007 to 2010</a></LI>
<LI><a href="../MW/MicrosoftWord.html">Word 2000 to 2003</a></LI>
<LI><a href="../excel2007/Excel2007.html">Excel 2007 to 2010</a></LI>
<LI><a href="../ME/MicrosoftExcel.html">Excel to 2003</a></LI>
<LI><a href="../WD/WebDesign.html">Web Design</a></LI>
<LI>&gt;<a href="javascript.html">Javascript</a>&lt;</LI>
<LI><a href="../NET/vbNet.html">Visual Basic .NET</a></LI>
<LI><a href="../php/php.html">Beginners PHP</a></LI>
<LI><a href="../csharp/csharp.html">C# .NET</a></LI>
<LI><a href="../java/java.html">Java for Beginners</a></LI>
</ul>
		
</NAV> <SECTION ID="Wrapper"> <ARTICLE> <HEADER> 
<H1 ID="Article">HTML5 Canvas and Keydown Events</H1>
</HEADER> <SECTION> 
<P class="section_part_size">Ongoing HTML5 Canvas Tutorial: <a href="html5_canvas_getting_started.html">1</a> 
  <a href="html5_canvas_drawing_shapes.html">2</a> <a href="html5_canvas_circles_and_arcs.html">3</a> 
  <a href="html5_canvas_paths_and_lines.html">4</a> <a href="html5_canvas_line_ends_and_joins.html">5</a> 
  <a href="html5_canvas_gradients.html">6</a> <a href="html5_canvas_fill_style_patterns.html">7</a> 
  <a href="html5_canvas_draw_scale_slice.html">8</a> <a href="html5_canvas_timers.html">9</a> 
  <b>10</b> <a href="html5_canvas_mouse_events.html">11</a> <a href="html5_canvas_touch_events.html">12</a> 
  <a href="html5_canvas_adding_text.html">13</a> <a href="html5_canvas_text_alignment.html">14</a> 
  <a href="html5_canvas_drop_shadows.html">15</a> </P>
<P>&nbsp;</P>
<P>Instead of moving the black rectangle with a timer as we did in <a href="html5_canvas_timers.html">the 
  last lesson</a>, a shape can be moved by pressing keys on the keyboard. What 
  we'll do is to move it left when the A key is pressed and move it right when 
  the D key is pressed. We'll move the black rectangle up when the W key is pressed 
  and down when the S key is pressed. To see what your web page will look like 
  at the end of this lesson, click the link below (opens in a new window or tab):</P>
<P align="center"><a href="move_box_keyboard.html" target="_blank">Move a canvas 
  rectangle using keydown events</a></P>
  <P align="center"><script type="text/javascript"><!--
google_ad_client = "ca-pub-3498263538959058";
/* js_top */
google_ad_slot = "5820968310";
google_ad_width = 468;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script></P>
<h3>Detecting a Key Press</h3>
<P>Things like buttons, text boxes, images and hyperlinks have events such as 
  onClick attached to them. Unfortunately, the canvas tag doesn't. So there's 
  no handy onKeyPress event you can use. You can, however, write your own events 
  and attach them to the canvas tag. This is done with the Javascript method <b>addEventListener</b>. 
  Here's the syntax for the method:</P>
<P align="center"><b>addEventListener( event_type, event_handler, capture )</b></P>
<P>The <b>event_type</b> argument is the type of event you want: click, mouseover, 
  keypress, and lots more besides. The <b>event_handler</b> is the name of the 
  function you want to call for the event. The <b>capture</b> argument is a Boolean 
  value. It can usually be set to false. This means you don't want to capture 
  any other events.</P>
<P>If you want the entire browser window to accept a key press event, the code 
  would be this:</P>
<P align="center"><b>window.addEventListener( &quot;keypress&quot;, doKeyDown, 
  false )</b></P>
<P>So the first arguments tells addEventListener that we want to activate the 
  keypress event. The second argument is a function we've called <b>doKeyDown</b>. 
  This is the function that will be called whenever a key is pressed on the keyboard.</P>
<P>We want the canvas tag rather than the entire browser window to accept key 
  presses, though. So we can change the code to this:</P>
<P class="indent_big">var canvas = document.getElementById(&quot;canvas_1&quot;);<br>
  canvas.addEventListener( &quot;keydown&quot;, doKeyDown, true);</P>
<p>We first get a reference to the canvas with <b>getElementById</b>. This reference 
  is placed in a variable we've called <b>canvas</b>. It is then used with the 
  addEventListener method.</p>
<P>Now that we have an event set up for when the key pressed, let's add the doKeyDown 
  function:</P>
<P class="indent_big">function doKeyDown(e) {</P>
<P class="indent_bigger">alert( e.keyCode )</P>
<P class="indent_big">}</P>
<p>In between the round brackets of your event function you can type a variable 
  name. We've called ours e. This variable contains the keyboard event itself. 
  To get at the key that was pressed you can use the inbuilt property keyCode. 
  This returns a number relating to the key that pressed. The A key on the keyboard, 
  whether you have CAPLOCK on or not, has a key code number of 65. The other key 
  codes we're interested in are these:</p>
<p class="indent_bigger">W = 87<br>
  S = 83<br>
  D = 68</p>
<p>With these key codes, then, we can write a series of IF Statements for each 
  key:</p>
<p class="indent_big">if ( e.keyCode == 87 ) {<br>
  }</p>
<p class="indent_big">if ( e.keyCode == 83 ) {<br>
  }</p>
<p class="indent_big">if ( e.keyCode == 65 ) {<br>
  }</p>
<p class="indent_big">if ( e.keyCode == 68 ) {<br>
  }</p>
<p>The code for each IF Statement can move the rectangle. The entire code for 
  our doKeyDown function is this:</p>
<p align="center"><img src="images/canvas/do_key_down.gif" alt="Javascript function to get keydown event of the HTML5 canvas"></p>
<P>When the W key is pressed we have a call to a <b>clearCanvas</b> function. 
  You can add this one:</P>
<P class="indent_big">function clearCanvas() {</P>
<P class="indent_bigger">canvas.width = canvas.width;</P>
<P class="indent_big">}</P>
<p>We then take 10 away from the y variable:</p>
<p class="indent_bigger">y = y - 10;</p>
<p>The first time the setInterval timer activates the y variable will then by 
  90. The x variable will still be on 100. These figures are used in the next 
  line:</p>
<p class="indent_bigger">canvas_context.fillRect( x, y, 50, 30);</p>
<p>So the filled rectangle will be at X, Y position 100, 90 when the W key is 
  pressed. Press it again and they will be 100 80.</p>
<p>The same holds for the other three keys: change the X or Y value and use them 
  to get a new position for the rectangle. All this happened when keys are pressed 
  on the keyboard. Try it yourself. You should find that you can move the rectangle 
  around the canvas by pressed the W, S, A, or D keys.</p>
<P>You can get the whole code for this lesson here (opens in a new window or tab): 
  <a href="move_box_keyboard.txt" target="_blank">Keydown code for the canvas 
  tag</a>.</P>
<P>&nbsp;</P>
<P>In the next lesson, you'll learn how to handle mouse events and the HTML5 canvas.</P>
</SECTION></ARTICLE></SECTION> <FOOTER> 
<P class="course_links"><a href="html5_canvas_timers.html">&lt; Simple Animation</a> 
  | <a href="html5_canvas_mouse_events.html">Mouse Events and the HTML5 Canvas 
  &gt;</a></P>
		<P><A HREF="javascript.html">Back to the Home Page</A>
      		<P>&copy; All course material copyright Home and Learn</P>
    	</FOOTER>

  </BODY>

<!-- Mirrored from www.homeandlearn.co.uk/JS/html5_canvas_keyboard_keys.html by HTTrack Website Copier/3.x [XR&CO'2005], Thu, 24 Jan 2013 07:19:57 GMT -->
</HTML>

