<!DOCTYPE html>
<HTML>
	
<!-- Mirrored from www.homeandlearn.co.uk/JS/geolocation_and_google_maps.html by HTTrack Website Copier/3.x [XR&CO'2005], Thu, 24 Jan 2013 07:19:49 GMT -->
<HEAD>
		<TITLE>Geolocation and Online Maps</TITLE>
	<LINK REL=Stylesheet TYPE ="text/css" HREF="two_col_style_1-2.css">
		<meta name="description" content="Beginners Javascrpt tutorials - Geolocation and Google Maps.">
		<meta itemprop="name" content="Home and Learn">
		<meta itemprop="description" content="Free Javascript Course">
		<meta itemprop="image" content="../logo5.jpg">
		<link rel="publisher" href="https://plus.google.com/104045712242599534737" />
	</HEAD>


	<BODY>
		<HEADER ID="Banner"><P>&nbsp;</P>
			<H1><SPAN class="Logo_Text">Free</SPAN> <SPAN class="Logo_Text2">Javascript</SPAN> <SPAN class="Logo_Text">Courses</SPAN></H1>
		</HEADER>
<HR />

		<NAV ID="left_menu">
		<P>&nbsp;</P>
<P>&nbsp;</P>
		<H3>Computer Courses</H3>
<ul>
<LI><a href="../index-2.html">Home</a></LI>
<LI><a href="../BC/BeginnersComputing.html">Beginners Computing </a></LI>
<LI><a href="../word2007_2010/Word-2007-2010.html">Word 2007 to 2010</a></LI>
<LI><a href="../MW/MicrosoftWord.html">Word 2000 to 2003</a></LI>
<LI><a href="../excel2007/Excel2007.html">Excel 2007 to 2010</a></LI>
<LI><a href="../ME/MicrosoftExcel.html">Excel to 2003</a></LI>
<LI><a href="../WD/WebDesign.html">Web Design</a></LI>
<LI>&gt;<a href="javascript.html">Javascript</a>&lt;</LI>
<LI><a href="../NET/vbNet.html">Visual Basic .NET</a></LI>
<LI><a href="../php/php.html">Beginners PHP</a></LI>
<LI><a href="../csharp/csharp.html">C# .NET</a></LI>
<LI><a href="../java/java.html">Java for Beginners</a></LI>
</ul>
		
</NAV> <SECTION ID="Wrapper"> <ARTICLE> <HEADER> 
<H1 ID="Article">Geolocation and Google Maps</H1>
</HEADER> <SECTION> 
<P align="center">This lesson continues from <a href="javascript_and_geolocation.html">the 
  previous one</a>.</P>
<P>Now that we have a pair of coordinates, we can use them with the Google Maps 
  API (Application Programming Interface). The API we'll use is called <b>staticmap</b>. 
  This is one of the easier Google mapping APIs to get to grips with. It uses 
  something called a querystring to get the various options available to you.</P>
  <P align="center"><script type="text/javascript"><!--
google_ad_client = "ca-pub-3498263538959058";
/* js_top */
google_ad_slot = "5820968310";
google_ad_width = 468;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script></P>
<h3>Querystrings</h3>
<P>A querystring is way to get information using a key/value pair. Here's an example 
  of a key/value pair:</P>
<P class="indent_big">sensor=false</P>
<P>In the querystring above, <b>sensor</b> is the key and <b>false</b> is the 
  value. The two are separated by an equal sign, with no spaces between the two. 
  (The sensor key is required if you're using Google's static maps. A value of 
  false means you're not updating the information - you just want the data once.)</P>
<P>Two querystrings are separated from each other with the ampersand character 
  (&amp;). For example, there is a <b>size</b> key that takes a height and width 
  as its value. To separate the two querystrings you do this:</P>
<P class="indent_big">size=500x500&amp;sensor=false</P>
<P>To keep things simple, we'll use three other keys: <b>center</b>, <b>zoom</b>, 
  and <b>markers</b>. The center key is required. Its value can be a pair of latitude 
  and longitude coordinates separated by a comma, or an actual address (center=Chicago).</P>
<P>The <b>zoom</b> key refers to how much detail you want display. A zoom value 
  of 0 means you want to view the whole world; a value of 21, the highest, means 
  you want to zoom in really close. The zoom key is required if you miss out the 
  markers key.</P>
<P>The <b>markers</b> key refers to the position marker over the coordinates you 
  want. This can be quite complicated so we urge you to study the documentation, 
  here:</P>
<P align="center"><a href="https://developers.google.com/maps/documentation/staticmaps/#Markers" target="_blank">https://developers.google.com/maps/documentation/staticmaps/#Markers</a></P>
<P>We'll keep it simple, though, and just add our latitude and longitude coordinates 
  again.</P>
<P>So here's the whole thing:</P>
<P class="indent_small">var pos=position.coords.latitude + &quot;,&quot; + position.coords.longitude;</P>
<P class="indent_small">var display=&quot;http://maps.googleapis.com/maps/api/staticmap?center=&quot; 
  + pos + &quot;&amp;zoom=15&amp;size=500x500&amp;markers=&quot; + pos + &quot;&amp;sensor=false&quot;;</P>
<P>Let's break that down a bit.</P>
<P>The first line just joins our two coordinates together, separated by a comma. 
  The comma goes between quote marks (single or double). There must be no spaces 
  between your comma and your quotes.</P>
<P>The second line is where we return the Google map. The first part is this:</P>
<P class="indent_small">http://maps.googleapis.com/maps/api/staticmap?</P>
<P>The question mark at the end means that a querystring follows. Our querystring 
  itself is this:</P>
<P class="indent_small">center=&quot; + pos + &quot;&amp;zoom=15&amp;size=500x500&amp;markers=&quot; 
  + pos + &quot;&amp;sensor=false&quot;;</P>
<P>The double quote marks after center= is matched to the first one before http:</P>
<P class="indent_small">&quot;http://maps.googleapis.com/maps/api/staticmap?center=&quot;</P>
<P>We need to do this because our coordinates are held in a variable. If you put 
  quote marks around a variable Javascript treats it as a string and just prints 
  the variable name rather than its contents.</P>
<P>Next we have:</P>
<P class="indent_bigger">+ pos +</P>
<P>This concatenates the <b>pos</b> variable with the rest of the string. The 
  next part is this:</P>
<P class="indent_bigger">&quot;&amp;zoom=15&amp;size=500x500&amp;markers=&quot;</P>
<P>So we're setting the zoom level to 15 and the size to 500 by 500. The markers 
  are the same as the values in the pos variable. In other words, put a position 
  marker over the latitude and longitude coordinates. Finally, we set sensor to 
  false.</P>
<P>When Google has finished with your querystring it will return an image with 
  the map you requested. Our image is being held in the variable we called <b>display</b>. 
  We need to add this to an IMG tag and place it in the BODY of the HTML. The 
  next two lines do that:</P>
<P class="indent_big">var img_display = &quot;&lt;IMG SRC=&quot; + display + &quot;&gt;&quot;;</P>
<P class="indent_big">document.getElementById(&quot;map&quot;).innerHTML=img_display;</P>
<p>The first line creates the HTML image element, with the display variable as 
  the source. The second line uses innerHTML to add the image to the page.</p>
<p>The whole of the getLongLat function should look like this:</p>
<p align="center"><img src="images/chapter_8/getlonglat_function2.gif" alt="Google Maps API used with Geolocation"></p>
<p>Make sure you're online and test it out in your browser. If all went well you 
  should see a map displayed for your current location.</p>
<p>&nbsp;</p>
<p>In the next section, we're going to take a look at using Javascript with the 
  HTML5 canvas.<br>
</p>
</SECTION></ARTICLE> </SECTION> <FOOTER> 
<P class="course_links"><a href="javascript_and_geolocation.html">&lt; Geolocation</a> 
  | <a href="html5_canvas_getting_started.html">HTML5 Canvas &gt;</a></P>
		<P><A HREF="javascript.html">Back to the Home Page</A>
      		<P>&copy; All course material copyright Home and Learn</P>
    	</FOOTER>

  </BODY>

<!-- Mirrored from www.homeandlearn.co.uk/JS/geolocation_and_google_maps.html by HTTrack Website Copier/3.x [XR&CO'2005], Thu, 24 Jan 2013 07:19:49 GMT -->
</HTML>

